import{n as L,d as z,D as g,ah as H,r as k,H as G,o as Q,c as n,e as X,T as m,g as a,b as t,f as s,w as o,K as w,ak as M,h as i,t as A,W as B,_ as C,k as Z,l as r,a6 as ee}from"./index-DWMcEsZL.js";import{_ as I,a as D}from"./CardContent.vue_vue_type_script_setup_true_lang-OghApYBC.js";import{_ as te,S as se,L as ae}from"./CardFooter.vue_vue_type_script_setup_true_lang-C7-oCGOM.js";import{_ as $,a as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-CnxpTyPY.js";import{_ as p,a as U}from"./Label.vue_vue_type_script_setup_true_lang-DUwXJ6qU.js";import{_ as le}from"./Textarea.vue_vue_type_script_setup_true_lang-B1BXL8iq.js";import{_ as b}from"./Switch.vue_vue_type_script_setup_true_lang-BrvouGco.js";import{_ as f}from"./index-txvlkIOj.js";import{C as x}from"./check-CRExx-U7.js";import{I as q}from"./info-Cra0q8Yp.js";import{C as F}from"./circle-alert-DS8f9FOJ.js";import{A as oe}from"./arrow-right--cugQCnp.js";import"./useFormControl-GFYNTmYm.js";import"./VisuallyHiddenInput-rnuKpFV6.js";/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=L("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=L("PhoneIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ne={class:"space-y-6"},re={key:0,class:"p-4 bg-gradient-to-r from-green-50 to-green-50 dark:from-green-900/20 dark:to-green-900/20 border border-green-200 dark:border-green-800 rounded-lg"},de={class:"flex items-center gap-3"},ue={class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},me={class:"flex items-center gap-3"},pe={class:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg"},fe={class:"space-y-6"},ce={class:"space-y-4"},ve={class:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},ge={class:"flex items-start gap-2"},be={class:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs"},xe={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},ye={class:"p-6 bg-gray-50 dark:bg-gray-800 rounded-lg border"},ke={class:"space-y-4"},we={key:0,class:"space-y-2"},he={class:"flex items-center gap-2 text-sm text-muted-foreground"},_e={key:1,class:"space-y-2"},Ne={class:"p-3 bg-white dark:bg-gray-700 border rounded-lg text-sm"},Se={class:"whitespace-pre-wrap"},Ee={key:2,class:"space-y-2"},Ve={class:"flex items-center gap-2 text-sm text-muted-foreground"},Ae={class:"space-y-4 pt-6 border-t border-gray-200 dark:border-gray-700"},Ce={class:"relative"},Pe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},We={key:0,class:"mt-2 flex items-center gap-2 text-sm text-red-600"},Me={class:"space-y-4 pt-6 border-t border-gray-200 dark:border-gray-700"},Be={class:"space-y-4"},Ie={class:"flex items-center space-x-3"},De={key:0,class:"ml-6 space-y-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border"},$e={class:"relative"},Te={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ue={key:0,class:"mt-2 flex items-center gap-2 text-sm text-red-600"},qe={class:"flex items-center space-x-3"},Fe={key:1,class:"ml-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg"},Re={class:"flex items-start gap-3"},Le={class:"space-y-4 pt-6 border-t border-gray-200 dark:border-gray-700"},Je={class:"space-y-4"},Oe={class:"flex items-center space-x-3"},je={class:"flex items-center space-x-3"},Ke={class:"flex items-center space-x-3"},Ye={class:"flex items-center gap-2 text-sm text-muted-foreground"},ze={class:"flex items-center gap-1"},He={key:0,class:"w-2 h-2 bg-green-500 rounded-full"},Ge={key:1,class:"w-2 h-2 bg-orange-500 rounded-full"},Qe={key:2,class:"w-2 h-2 bg-muted-foreground rounded-full"},Xe={key:0},Ze={key:1},et={key:2},tt={class:"flex items-center gap-3"},st={key:0,class:"flex items-center gap-2"},at={key:1,class:"flex items-center gap-2"},lt={key:0,class:"flex items-center gap-2"},ot={key:1,class:"flex items-center gap-2"},it={class:"flex items-center gap-3"},nt={class:"p-2 bg-amber-100 dark:bg-amber-900/20 rounded-lg"},rt={class:"space-y-2 text-sm text-muted-foreground"},dt={class:"flex items-start gap-2"},ut={class:"flex items-start gap-2"},mt={class:"flex items-start gap-2"},pt={class:"flex items-start gap-2"},ft=z({__name:"index",setup(ct){const P=Z(),J=H(),W=g(()=>J.params.id),l=k({whatsappMessage:`ðŸ”” *New Booking Inquiry!*

ðŸ‘¤ *Customer:* {name}
ðŸ“§ *Email:* {email}
ðŸ“± *Phone:* {phone}
ðŸ“¸ *Session:* {session_type}
ðŸ’° *Total Price:* {total_price}

âš¡ Please follow up with the customer soon!"`,whatsappNumber:"",enableEmailBackup:!1,backupEmail:"",includeCustomerDetails:!0,instantNotification:!0,includeFormSummary:!0,trackDelivery:!0}),h=k({whatsappMessage:`ðŸ”” *New Booking Inquiry!*

ðŸ‘¤ *Customer:* {name}
ðŸ“§ *Email:* {email}
ðŸ“± *Phone:* {phone}
ðŸ“¸ *Session:* {session_type}
ðŸ’° *Total Price:* {total_price}

âš¡ Please follow up with the customer soon!"`,whatsappNumber:"",enableEmailBackup:!1,backupEmail:"",includeCustomerDetails:!0,instantNotification:!0,includeFormSummary:!0,trackDelivery:!0}),c=k(!1),v=k(!1),_=g(()=>l.value.whatsappNumber?/^\+[1-9]\d{1,14}$/.test(l.value.whatsappNumber):!0),N=g(()=>l.value.backupEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.value.backupEmail):!0),y=g(()=>l.value.whatsappNumber&&_.value&&(!l.value.enableEmailBackup||!l.value.backupEmail||N.value)),S=g(()=>JSON.stringify(l.value)!==JSON.stringify(h.value)),O=g(()=>l.value.whatsappMessage.replace(/{name}/g,"John Doe").replace(/{email}/g,"john@example.com").replace(/{phone}/g,"+60123456789").replace(/{session_type}/g,"Wedding Photography").replace(/{total_price}/g,"MYR 2,500.00").replace(/{date}/g,"2024-06-15").replace(/{location}/g,"Kuala Lumpur").replace(/{addons}/g,"Extra Hour, Photo Album"));let E=null;const j=()=>{E&&clearTimeout(E),E=setTimeout(()=>{S.value&&y.value&&V(!0)},3e3)};G(()=>l.value,()=>{v.value=!1,j()},{deep:!0});const K=async()=>{try{console.log("Loading form data for ID:",W.value),h.value=JSON.parse(JSON.stringify(l.value)),v.value=!0}catch(u){console.error("Error loading form data:",u),w.error("Failed to load form data")}},V=async(u=!1)=>{if(!y.value){u||w.error("Please fix validation errors before saving");return}try{c.value=!0,console.log("Saving WhatsApp settings:",l.value),await new Promise(e=>setTimeout(e,1e3)),h.value=JSON.parse(JSON.stringify(l.value)),v.value=!0,u||w.success("WhatsApp settings saved successfully!")}catch(e){console.error("Error saving settings:",e),u||w.error("Failed to save settings. Please try again.")}finally{c.value=!1}},Y=async()=>{await V(),v.value&&P.push(`/studio/forms/${W.value}/preview`)};return Q(()=>{K()}),(u,e)=>(r(),n("div",ne,[e[57]||(e[57]=X('<div class="space-y-2" data-v-62857653><h1 class="text-2xl font-bold text-foreground" data-v-62857653>WhatsApp Notifications</h1><p class="text-muted-foreground" data-v-62857653> Configure WhatsApp notifications to receive instant alerts when customers submit booking forms. </p></div><div class="flex items-center gap-2 text-sm text-muted-foreground" data-v-62857653><div class="flex items-center gap-1" data-v-62857653><div class="w-2 h-2 bg-primary rounded-full" data-v-62857653></div><span data-v-62857653>Step 6 of 6</span></div><span data-v-62857653>â€¢</span><span data-v-62857653>WhatsApp Notifications</span></div>',2)),l.value.whatsappNumber&&l.value.whatsappMessage?(r(),n("div",re,[t("div",de,[t("div",ue,[a(s(x),{class:"w-4 h-4 text-white"})]),e[9]||(e[9]=t("div",null,[t("span",{class:"text-sm font-semibold text-green-800 dark:text-green-200"}," WhatsApp notifications configured "),t("p",{class:"text-xs text-green-600 dark:text-green-300"}," You'll receive instant alerts for new bookings ")],-1))])])):m("",!0),a(s(I),null,{default:o(()=>[a(s($),null,{default:o(()=>[t("div",me,[t("div",pe,[a(s(M),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),t("div",null,[a(s(T),null,{default:o(()=>e[10]||(e[10]=[i("WhatsApp Notification Settings")])),_:1}),e[11]||(e[11]=t("p",{class:"text-sm text-muted-foreground mt-1"}," Get instant WhatsApp messages when customers submit booking inquiries ",-1))])])]),_:1}),a(s(D),null,{default:o(()=>[t("div",fe,[t("div",ce,[t("div",null,[a(s(p),{for:"whatsappMessage",class:"text-base font-medium"},{default:o(()=>e[12]||(e[12]=[i("Notification Message Template")])),_:1}),e[22]||(e[22]=t("p",{class:"text-sm text-muted-foreground mt-1 mb-3"}," This message will be sent to your WhatsApp when a customer submits a booking form. Use placeholders to include customer details. ",-1)),a(s(le),{id:"whatsappMessage",modelValue:l.value.whatsappMessage,"onUpdate:modelValue":e[0]||(e[0]=d=>l.value.whatsappMessage=d),placeholder:`ðŸ”” *New Booking Inquiry!*

ðŸ‘¤ *Customer:* {name}
ðŸ“§ *Email:* {email}
ðŸ“± *Phone:* {phone}
ðŸ“¸ *Session:* {session_type}
ðŸ’° *Total Price:* {total_price}

âš¡ Please follow up with the customer soon!`,class:"min-h-[120px]",rows:"6"},null,8,["modelValue"]),t("div",ve,[t("div",ge,[a(s(q),{class:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),t("div",null,[e[21]||(e[21]=t("p",{class:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1"}," Available Customer Data Placeholders: ",-1)),t("div",be,[a(s(f),{variant:"outline",class:"text-blue-700 dark:text-blue-300"},{default:o(()=>e[13]||(e[13]=[i("{name}")])),_:1}),a(s(f),{variant:"outline",class:"text-blue-700 dark:text-blue-300"},{default:o(()=>e[14]||(e[14]=[i("{email}")])),_:1}),a(s(f),{variant:"outline",class:"text-blue-700 dark:text-blue-300"},{default:o(()=>e[15]||(e[15]=[i("{phone}")])),_:1}),a(s(f),{variant:"outline",class:"text-blue-700 dark:text-blue-300"},{default:o(()=>e[16]||(e[16]=[i("{session_type}")])),_:1}),a(s(f),{variant:"outline",class:"text-blue-700 dark:text-blue-300"},{default:o(()=>e[17]||(e[17]=[i("{total_price}")])),_:1}),a(s(f),{variant:"outline",class:"text-blue-700 dark:text-blue-300"},{default:o(()=>e[18]||(e[18]=[i("{date}")])),_:1}),a(s(f),{variant:"outline",class:"text-blue-700 dark:text-blue-300"},{default:o(()=>e[19]||(e[19]=[i("{location}")])),_:1}),a(s(f),{variant:"outline",class:"text-blue-700 dark:text-blue-300"},{default:o(()=>e[20]||(e[20]=[i("{addons}")])),_:1})])])])])])]),t("div",xe,[t("div",ye,[e[26]||(e[26]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"}," Notification Preview ",-1)),t("div",ke,[l.value.whatsappNumber?(r(),n("div",we,[e[23]||(e[23]=t("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"}," Notifications will be sent to: ",-1)),t("div",he,[a(s(M),{class:"w-4 h-4 text-green-500"}),i(" "+A(l.value.whatsappNumber),1)])])):m("",!0),l.value.whatsappMessage?(r(),n("div",_e,[e[24]||(e[24]=t("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"}," Sample Notification Message: ",-1)),t("div",Ne,[t("div",Se,A(O.value),1)])])):m("",!0),l.value.enableEmailBackup&&l.value.backupEmail?(r(),n("div",Ee,[e[25]||(e[25]=t("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"}," Backup Email: ",-1)),t("div",Ve,[a(s(R),{class:"w-4 h-4 text-blue-500"}),i(" "+A(l.value.backupEmail),1)])])):m("",!0)])])]),t("div",Ae,[t("div",null,[a(s(p),{for:"whatsappNumber",class:"text-base font-medium"},{default:o(()=>e[27]||(e[27]=[i("Your WhatsApp Number")])),_:1}),e[29]||(e[29]=t("p",{class:"text-sm text-muted-foreground mt-1 mb-3"}," Enter your WhatsApp number where you want to receive booking notifications. ",-1)),t("div",Ce,[a(s(U),{id:"whatsappNumber",modelValue:l.value.whatsappNumber,"onUpdate:modelValue":e[1]||(e[1]=d=>l.value.whatsappNumber=d),placeholder:"+60123456789",class:B(["pl-10",{"border-red-500":!_.value&&l.value.whatsappNumber}])},null,8,["modelValue","class"]),t("div",Pe,[a(s(ie),{class:"w-4 h-4 text-gray-400"})])]),!_.value&&l.value.whatsappNumber?(r(),n("div",We,[a(s(F),{class:"w-4 h-4"}),e[28]||(e[28]=i(" Please enter a valid WhatsApp number with country code (e.g., +60123456789) "))])):m("",!0),e[30]||(e[30]=t("p",{class:"text-sm text-muted-foreground mt-2"}," Include the country code (e.g., +60 for Malaysia, +1 for US) ",-1))])]),t("div",Me,[e[39]||(e[39]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"}," Backup Notification Settings "),t("p",{class:"text-sm text-muted-foreground mt-1"}," Configure backup notification methods in case WhatsApp delivery fails. ")],-1)),t("div",Be,[t("div",Ie,[a(s(b),{modelValue:l.value.enableEmailBackup,"onUpdate:modelValue":e[2]||(e[2]=d=>l.value.enableEmailBackup=d)},null,8,["modelValue"]),t("div",null,[a(s(p),{class:"text-base font-medium"},{default:o(()=>e[31]||(e[31]=[i("Enable email backup notifications")])),_:1}),e[32]||(e[32]=t("p",{class:"text-sm text-muted-foreground"}," Send email notifications if WhatsApp delivery fails ",-1))])]),l.value.enableEmailBackup?(r(),n("div",De,[t("div",null,[a(s(p),{for:"backupEmail",class:"text-sm font-medium"},{default:o(()=>e[33]||(e[33]=[i("Backup Email Address")])),_:1}),e[35]||(e[35]=t("p",{class:"text-sm text-muted-foreground mt-1 mb-3"}," Email address to receive notifications if WhatsApp fails. ",-1)),t("div",$e,[a(s(U),{id:"backupEmail",modelValue:l.value.backupEmail,"onUpdate:modelValue":e[3]||(e[3]=d=>l.value.backupEmail=d),placeholder:"admin@yourcompany.com",type:"email",class:B(["pl-10",{"border-red-500":!N.value&&l.value.backupEmail}])},null,8,["modelValue","class"]),t("div",Te,[a(s(R),{class:"w-4 h-4 text-gray-400"})])]),!N.value&&l.value.backupEmail?(r(),n("div",Ue,[a(s(F),{class:"w-4 h-4"}),e[34]||(e[34]=i(" Please enter a valid email address "))])):m("",!0)]),t("div",qe,[a(s(b),{modelValue:l.value.includeCustomerDetails,"onUpdate:modelValue":e[4]||(e[4]=d=>l.value.includeCustomerDetails=d)},null,8,["modelValue"]),t("div",null,[a(s(p),{class:"text-sm font-medium"},{default:o(()=>e[36]||(e[36]=[i("Include customer details in email")])),_:1}),e[37]||(e[37]=t("p",{class:"text-sm text-muted-foreground"}," Include full customer information in backup email notifications ",-1))])])])):m("",!0),l.value.enableEmailBackup?m("",!0):(r(),n("div",Fe,[t("div",Re,[a(s(q),{class:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),e[38]||(e[38]=t("div",null,[t("p",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"}," No Backup Configured "),t("p",{class:"text-sm text-yellow-700 dark:text-yellow-300 mt-1"}," If WhatsApp notifications fail, you won't receive any backup alerts. Consider enabling email backup for important bookings. ")],-1))])]))])]),t("div",Le,[e[46]||(e[46]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"}," Advanced Notification Settings "),t("p",{class:"text-sm text-muted-foreground mt-1"}," Configure additional notification preferences and delivery options. ")],-1)),t("div",Je,[t("div",Oe,[a(s(b),{modelValue:l.value.instantNotification,"onUpdate:modelValue":e[5]||(e[5]=d=>l.value.instantNotification=d)},null,8,["modelValue"]),t("div",null,[a(s(p),{class:"text-base font-medium"},{default:o(()=>e[40]||(e[40]=[i("Instant notifications")])),_:1}),e[41]||(e[41]=t("p",{class:"text-sm text-muted-foreground"}," Send notifications immediately when forms are submitted ",-1))])]),t("div",je,[a(s(b),{modelValue:l.value.includeFormSummary,"onUpdate:modelValue":e[6]||(e[6]=d=>l.value.includeFormSummary=d)},null,8,["modelValue"]),t("div",null,[a(s(p),{class:"text-base font-medium"},{default:o(()=>e[42]||(e[42]=[i("Include booking summary")])),_:1}),e[43]||(e[43]=t("p",{class:"text-sm text-muted-foreground"}," Include a detailed summary of the customer's booking in notifications ",-1))])]),t("div",Ke,[a(s(b),{modelValue:l.value.trackDelivery,"onUpdate:modelValue":e[7]||(e[7]=d=>l.value.trackDelivery=d)},null,8,["modelValue"]),t("div",null,[a(s(p),{class:"text-base font-medium"},{default:o(()=>e[44]||(e[44]=[i("Track notification delivery")])),_:1}),e[45]||(e[45]=t("p",{class:"text-sm text-muted-foreground"}," Monitor notification delivery status for analytics and troubleshooting ",-1))])])])])])]),_:1}),a(s(te),{class:"flex items-center justify-between bg-muted/30"},{default:o(()=>[t("div",Ye,[t("div",ze,[v.value?(r(),n("div",He)):S.value?(r(),n("div",Ge)):(r(),n("div",Qe))]),v.value?(r(),n("span",Xe,"Saved")):S.value?(r(),n("span",Ze,"Unsaved changes")):(r(),n("span",et,"Ready to save"))]),t("div",tt,[a(s(C),{onClick:e[8]||(e[8]=d=>s(P).back()),variant:"outline",disabled:c.value},{default:o(()=>e[47]||(e[47]=[i(" Back ")])),_:1},8,["disabled"]),a(s(C),{onClick:V,variant:"outline",disabled:c.value||!y.value,class:"min-w-[100px]"},{default:o(()=>[c.value?(r(),n("div",st,e[48]||(e[48]=[t("div",{class:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"},null,-1),i(" Saving... ")]))):(r(),n("div",at,[a(s(se),{class:"w-4 h-4"}),e[49]||(e[49]=i(" Save Changes "))]))]),_:1},8,["disabled"]),a(s(C),{onClick:Y,disabled:c.value||!y.value,class:"min-w-[120px]"},{default:o(()=>[c.value?(r(),n("div",lt,e[50]||(e[50]=[t("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1),i(" Saving... ")]))):(r(),n("div",ot,[a(s(oe),{class:"w-4 h-4"}),e[51]||(e[51]=i(" Continue to Preview "))]))]),_:1},8,["disabled"])])]),_:1})]),_:1}),a(s(I),null,{default:o(()=>[a(s($),null,{default:o(()=>[t("div",it,[t("div",nt,[a(s(ae),{class:"w-5 h-5 text-amber-600 dark:text-amber-400"})]),a(s(T),{class:"text-base"},{default:o(()=>e[52]||(e[52]=[i("WhatsApp Notification Tips")])),_:1})])]),_:1}),a(s(D),null,{default:o(()=>[t("ul",rt,[t("li",dt,[a(s(x),{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e[53]||(e[53]=t("span",null," Use placeholders to automatically include customer information in notifications ",-1))]),t("li",ut,[a(s(x),{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e[54]||(e[54]=t("span",null," Always include your country code in the WhatsApp number to receive notifications ",-1))]),t("li",mt,[a(s(x),{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e[55]||(e[55]=t("span",null," Set up email backup to ensure you never miss important booking inquiries ",-1))]),t("li",pt,[a(s(x),{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e[56]||(e[56]=t("span",null," Enable instant notifications to respond quickly to customer inquiries ",-1))])])]),_:1})]),_:1})]))}}),Ct=ee(ft,[["__scopeId","data-v-62857653"]]);export{Ct as default};
