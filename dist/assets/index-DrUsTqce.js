import{n as X,d as G,D as j,ah as Z,r as p,H as ee,o as se,c as i,e as te,T as S,g as a,b as s,f as o,t as m,w as n,K as h,h as u,_ as g,a2 as z,Q as M,U as A,W as U,j as ae,ad as oe,k as le,l as r,a6 as ie}from"./index-DWMcEsZL.js";import{_ as re,a as ne}from"./Label.vue_vue_type_script_setup_true_lang-DUwXJ6qU.js";import{_ as w}from"./index-txvlkIOj.js";import{_ as I,a as O}from"./CardContent.vue_vue_type_script_setup_true_lang-OghApYBC.js";import{_ as de,S as ue,L as ce}from"./CardFooter.vue_vue_type_script_setup_true_lang-C7-oCGOM.js";import{_ as B,a as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-CnxpTyPY.js";import{s as me,P as fe}from"./sessionTypes-D0LkTppI.js";import{_ as pe}from"./AddSessionTypeModal.vue_vue_type_script_setup_true_lang-BTPw92WO.js";import{I as ve}from"./info-Cra0q8Yp.js";import{C as k}from"./check-CRExx-U7.js";import{A as ge}from"./arrow-right--cugQCnp.js";import"./Textarea.vue_vue_type_script_setup_true_lang-B1BXL8iq.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-C_3-4gPP.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CFXF2yCi.js";/**
 * @license lucide-vue-next v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=X("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ye={class:"space-y-6"},be={key:0,class:"p-4 bg-gradient-to-r from-blue-50 to-blue-50 dark:from-blue-900/20 dark:to-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},_e={class:"flex items-center gap-3"},he={class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},ke={class:"text-sm font-semibold text-blue-800 dark:text-blue-200"},Se={class:"flex items-center gap-3"},we={class:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg"},Ce={class:"flex justify-end"},Te={class:"space-y-6"},Pe={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},$e={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ne=["onClick"],Fe={key:0,class:"absolute top-3 right-3 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center"},Me={class:"space-y-3"},Ae={class:"font-semibold text-gray-900 dark:text-gray-100 text-lg"},Re={class:"flex items-center gap-2 mt-1"},Ve={class:"flex items-center justify-between pt-2"},je={key:0,class:"text-sm font-medium text-blue-600 dark:text-blue-400"},ze={key:1,class:"text-sm text-muted-foreground group-hover:text-gray-700 dark:group-hover:text-gray-300"},Ue={key:2,class:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg"},Ie={key:0,class:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"},Oe={class:"flex items-center justify-between mb-6"},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},De={class:"flex items-start justify-between mb-4"},Je={class:"flex-1"},Le={class:"font-semibold text-gray-900 dark:text-gray-100 text-lg mb-2"},Ee={class:"flex items-center gap-2"},He={class:"space-y-3"},Ye={class:"relative"},Ke={key:0,class:"flex items-center gap-2 text-sm"},qe={class:"flex items-center gap-2 text-sm text-muted-foreground"},Qe={class:"flex items-center gap-1"},We={key:0,class:"w-2 h-2 bg-green-500 rounded-full"},Xe={key:1,class:"w-2 h-2 bg-orange-500 rounded-full"},Ge={key:2,class:"w-2 h-2 bg-muted-foreground rounded-full"},Ze={key:0},es={key:1},ss={key:2},ts={class:"flex items-center gap-3"},as={key:0,class:"flex items-center gap-2"},os={key:1,class:"flex items-center gap-2"},ls={key:0,class:"flex items-center gap-2"},is={key:1,class:"flex items-center gap-2"},rs={class:"flex items-center gap-3"},ns={class:"p-2 bg-amber-100 dark:bg-amber-900/20 rounded-lg"},ds={class:"space-y-2 text-sm text-muted-foreground"},us={class:"flex items-start gap-2"},cs={class:"flex items-start gap-2"},ms={class:"flex items-start gap-2"},fs={class:"flex items-start gap-2"},ps=G({__name:"index",setup(vs){const J=Z(),R=le(),L=j(()=>J.params.id),c=p([]),C=p(!1),y=p(!1),T=p(null),d=p({selectedSessionTypes:[]}),P=p({selectedSessionTypes:[]}),v=p(!1),x=p(!1),$=j(()=>JSON.stringify(d.value.selectedSessionTypes)!==JSON.stringify(P.value.selectedSessionTypes));let N=null;const E=()=>{N&&clearTimeout(N),N=setTimeout(()=>{$.value&&d.value.selectedSessionTypes.length>0&&F(!0)},3e3)};ee(()=>d.value.selectedSessionTypes,()=>{x.value=!1,E()},{deep:!0});const H=async()=>{try{C.value=!0;const l=await me.getSessionTypes();c.value=l.sessionTypes}catch(l){console.error("Error loading session types:",l),h.error("Failed to load session types")}finally{C.value=!1}},b=l=>d.value.selectedSessionTypes.some(e=>e.id===l),V=l=>{const e=d.value.selectedSessionTypes.findIndex(t=>t.id===l);if(e>-1)d.value.selectedSessionTypes.splice(e,1);else{const t=c.value.find(f=>f.id===l);d.value.selectedSessionTypes.push({id:l,customPrice:(t==null?void 0:t.price)||0})}},Y=l=>{const e=c.value.find(t=>t.id===l);return(e==null?void 0:e.name)||"Unknown Session"},_=l=>{const e=c.value.find(t=>t.id===l);return(e==null?void 0:e.price.toFixed(2))||"0.00"},K=l=>{T.value=l,y.value=!0},q=l=>{c.value.push(l),d.value.selectedSessionTypes.push({id:l.id,customPrice:l.price}),h.success("Session type added successfully!")},Q=l=>{const e=c.value.findIndex(t=>t.id===l.id);if(e>-1){c.value[e]=l;const t=d.value.selectedSessionTypes.findIndex(f=>f.id===l.id);t>-1&&(d.value.selectedSessionTypes[t].customPrice=l.price)}h.success("Session type updated successfully!")},F=async(l=!1)=>{try{v.value=!0,await new Promise(e=>setTimeout(e,1e3)),P.value=JSON.parse(JSON.stringify(d.value)),x.value=!0,l||h.success("Session types saved successfully!")}catch(e){console.error("Error saving form data:",e),l||h.error("Failed to save session types")}finally{v.value=!1}},W=async()=>{await F(),x.value&&R.push(`/studio/forms/${L.value}/addons`)};return se(()=>{H(),P.value=JSON.parse(JSON.stringify(d.value)),x.value=!0}),(l,e)=>(r(),i("div",ye,[e[30]||(e[30]=te('<div class="space-y-2" data-v-e0478f00><h1 class="text-2xl font-bold text-foreground" data-v-e0478f00>Session Types</h1><p class="text-muted-foreground" data-v-e0478f00> Choose the photography sessions your clients can book. You can customize the price for each session in your form. </p></div><div class="flex items-center gap-2 text-sm text-muted-foreground" data-v-e0478f00><div class="flex items-center gap-1" data-v-e0478f00><div class="w-2 h-2 bg-primary rounded-full" data-v-e0478f00></div><span data-v-e0478f00>Step 2 of 6</span></div><span data-v-e0478f00>•</span><span data-v-e0478f00>Session Types</span></div>',2)),d.value.selectedSessionTypes.length>0?(r(),i("div",be,[s("div",_e,[s("div",he,[a(o(ve),{class:"w-4 h-4 text-white"})]),s("div",null,[s("span",ke,m(d.value.selectedSessionTypes.length)+" session"+m(d.value.selectedSessionTypes.length>1?"s":"")+" selected ",1),e[4]||(e[4]=s("p",{class:"text-xs text-blue-600 dark:text-blue-300"}," Ready to proceed to next step ",-1))])])])):S("",!0),a(o(I),null,{default:n(()=>[a(o(B),null,{default:n(()=>[s("div",Se,[s("div",we,[a(o(xe),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),s("div",null,[a(o(D),null,{default:n(()=>e[5]||(e[5]=[u("Available Sessions")])),_:1}),e[6]||(e[6]=s("p",{class:"text-sm text-muted-foreground mt-1"}," Select and customize the photography sessions you offer ",-1))])]),s("div",Ce,[a(o(g),{onClick:e[0]||(e[0]=t=>y.value=!0),variant:"outline",size:"sm"},{default:n(()=>[a(o(z),{class:"w-4 h-4 mr-2"}),e[7]||(e[7]=u(" Add New Session "))]),_:1})])]),_:1}),a(o(O),null,{default:n(()=>[s("div",Te,[C.value?(r(),i("div",Pe,[(r(),i(M,null,A(6,t=>s("div",{key:t,class:"border rounded-lg p-4 animate-pulse"},e[8]||(e[8]=[s("div",{class:"h-4 bg-gray-200 rounded mb-2"},null,-1),s("div",{class:"h-3 bg-gray-200 rounded mb-3"},null,-1),s("div",{class:"h-6 bg-gray-200 rounded"},null,-1)]))),64))])):c.value.length>0?(r(),i("div",$e,[(r(!0),i(M,null,A(c.value,t=>(r(),i("div",{key:t.id,class:U(["relative border rounded-lg p-4 transition-all duration-200 group cursor-pointer",{"border-blue-500 bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-200 dark:ring-blue-800":b(t.id),"border-gray-200 hover:border-gray-300 hover:shadow-md":!b(t.id)}]),onClick:f=>V(t.id)},[b(t.id)?(r(),i("div",Fe,[a(o(k),{class:"w-4 h-4 text-white"})])):S("",!0),a(o(g),{onClick:ae(f=>K(t),["stop"]),variant:"ghost",size:"sm",class:U(["absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",{"right-10":b(t.id)}])},{default:n(()=>[a(o(fe),{class:"w-4 h-4"})]),_:2},1032,["onClick","class"]),s("div",Me,[s("div",null,[s("h4",Ae,m(t.name),1),s("div",Re,[e[9]||(e[9]=s("span",{class:"text-sm text-muted-foreground"},"Base Price:",-1)),a(o(w),{variant:"outline",class:"text-sm font-medium"},{default:n(()=>[u(" MYR "+m(t.price.toFixed(2)),1)]),_:2},1024)])]),s("div",Ve,[b(t.id)?(r(),i("span",je," ✓ Selected ")):(r(),i("span",ze," Click to select "))])])],10,Ne))),128))])):(r(),i("div",Ue,[e[11]||(e[11]=s("div",{class:"mb-4"},[s("svg",{class:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1)),e[12]||(e[12]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"}," No session types available ",-1)),e[13]||(e[13]=s("p",{class:"text-gray-500 mb-4"}," Create your first session type to get started ",-1)),a(o(g),{onClick:e[1]||(e[1]=t=>y.value=!0),variant:"outline"},{default:n(()=>[a(o(z),{class:"w-4 h-4 mr-2"}),e[10]||(e[10]=u(" Add Session Type "))]),_:1})]))]),d.value.selectedSessionTypes.length>0?(r(),i("div",Ie,[s("div",Oe,[e[14]||(e[14]=s("div",null,[s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"}," Selected Sessions "),s("p",{class:"text-sm text-muted-foreground mt-1"}," Customize pricing for your selected sessions ")],-1)),a(o(w),{variant:"secondary",class:"px-3 py-1"},{default:n(()=>[u(m(d.value.selectedSessionTypes.length)+" selected ",1)]),_:1})]),s("div",Be,[(r(!0),i(M,null,A(d.value.selectedSessionTypes,t=>(r(),i("div",{key:t.id,class:"p-6 bg-gradient-to-br from-blue-50 to-blue-50 dark:from-blue-900/10 dark:to-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},[s("div",De,[s("div",Je,[s("h4",Le,m(Y(t.id)),1),s("div",Ee,[e[15]||(e[15]=s("span",{class:"text-sm text-muted-foreground"},"Base Price:",-1)),a(o(w),{variant:"outline",class:"text-sm"},{default:n(()=>[u(" RM "+m(_(t.id)),1)]),_:2},1024)])]),a(o(g),{onClick:f=>V(t.id),variant:"ghost",size:"sm",class:"text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20"},{default:n(()=>[a(o(oe),{class:"w-4 h-4"})]),_:2},1032,["onClick"])]),s("div",He,[s("div",null,[a(o(re),{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},{default:n(()=>e[16]||(e[16]=[u(" Custom Form Price (MYR) ")])),_:1}),e[17]||(e[17]=s("p",{class:"text-xs text-muted-foreground mb-2"}," This price will be displayed to clients in your form ",-1))]),s("div",Ye,[a(o(ne),{modelValue:t.customPrice,"onUpdate:modelValue":f=>t.customPrice=f,modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"w-full pl-12 text-lg font-medium"},null,8,["modelValue","onUpdate:modelValue"]),e[18]||(e[18]=s("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[s("span",{class:"text-muted-foreground font-medium"},"RM")],-1))]),t.customPrice!=null&&t.customPrice!==parseFloat(_(t.id))?(r(),i("div",Ke,[e[19]||(e[19]=s("span",{class:"text-muted-foreground"},"Difference:",-1)),a(o(w),{variant:t.customPrice>parseFloat(_(t.id))?"default":"secondary",class:"text-xs"},{default:n(()=>[u(m(t.customPrice>parseFloat(_(t.id))?"+":"")+" RM "+m((t.customPrice-parseFloat(_(t.id))).toFixed(2)),1)]),_:2},1032,["variant"])])):S("",!0)])]))),128))])])):S("",!0)]),_:1}),a(o(de),{class:"flex items-center justify-between bg-muted/30"},{default:n(()=>[s("div",qe,[s("div",Qe,[x.value?(r(),i("div",We)):$.value?(r(),i("div",Xe)):(r(),i("div",Ge))]),x.value?(r(),i("span",Ze,"Saved")):$.value?(r(),i("span",es,"Unsaved changes")):(r(),i("span",ss,"Ready to save"))]),s("div",ts,[a(o(g),{onClick:e[2]||(e[2]=t=>o(R).back()),variant:"outline",disabled:v.value},{default:n(()=>e[20]||(e[20]=[u(" Back ")])),_:1},8,["disabled"]),a(o(g),{onClick:F,variant:"outline",disabled:d.value.selectedSessionTypes.length===0||v.value,class:"min-w-[100px]"},{default:n(()=>[v.value?(r(),i("div",as,e[21]||(e[21]=[s("div",{class:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"},null,-1),u(" Saving... ")]))):(r(),i("div",os,[a(o(ue),{class:"w-4 h-4"}),e[22]||(e[22]=u(" Save Changes "))]))]),_:1},8,["disabled"]),a(o(g),{onClick:W,disabled:d.value.selectedSessionTypes.length===0||v.value,class:"min-w-[120px]"},{default:n(()=>[v.value?(r(),i("div",ls,e[23]||(e[23]=[s("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1),u(" Saving... ")]))):(r(),i("div",is,[a(o(ge),{class:"w-4 h-4"}),e[24]||(e[24]=u(" Continue to Add-ons "))]))]),_:1},8,["disabled"])])]),_:1})]),_:1}),a(o(I),null,{default:n(()=>[a(o(B),null,{default:n(()=>[s("div",rs,[s("div",ns,[a(o(ce),{class:"w-5 h-5 text-amber-600 dark:text-amber-400"})]),a(o(D),{class:"text-base"},{default:n(()=>e[25]||(e[25]=[u("Session Type Tips")])),_:1})])]),_:1}),a(o(O),null,{default:n(()=>[s("ul",ds,[s("li",us,[a(o(k),{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e[26]||(e[26]=s("span",null," Offer a variety of session types to cater to different client needs ",-1))]),s("li",cs,[a(o(k),{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e[27]||(e[27]=s("span",null," Customize pricing for each session to match your form's target audience ",-1))]),s("li",ms,[a(o(k),{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e[28]||(e[28]=s("span",null," Consider seasonal pricing or package deals for multiple sessions ",-1))]),s("li",fs,[a(o(k),{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e[29]||(e[29]=s("span",null," Clear session names help clients understand what they're booking ",-1))])])]),_:1})]),_:1}),a(pe,{"is-open":y.value,"editing-session":T.value,"onUpdate:open":e[3]||(e[3]=t=>{y.value=t,t||(T.value=null)}),onSessionAdded:q,onSessionUpdated:Q},null,8,["is-open","editing-session"])]))}}),Fs=ie(ps,[["__scopeId","data-v-e0478f00"]]);export{Fs as default};
