import{d as Y,r as A,D as K,ag as O,o as G,c as Q,v as j,T as X,g as a,b as s,f as t,w as l,_ as p,k as Z,h as o,t as g,l as V}from"./index-C2UrP5hw.js";import{_ as ee}from"./PageHeader.vue_vue_type_script_setup_true_lang-B1Je6Lxx.js";import{_ as k,a as b}from"./CardContent.vue_vue_type_script_setup_true_lang-eN_1_cPI.js";import{_ as D}from"./CardDescription.vue_vue_type_script_setup_true_lang-CMmCBcWv.js";import{_ as y,a as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-Q0gFftlI.js";import{_ as B,a as T,b as $,c as S,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-BJhQFqbJ.js";import{_ as m}from"./Input.vue_vue_type_script_setup_true_lang-CSZ-Dkyw.js";import{_ as d}from"./Label.vue_vue_type_script_setup_true_lang-DVjpD-L7.js";import{_ as te}from"./Textarea.vue_vue_type_script_setup_true_lang--1zaO6ew.js";import{L as ae}from"./LoadingPage-DgCemYQp.js";import"./check-CMqAtv7z.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./useFormControl-BTKw-cda.js";const le={class:"space-y-6"},se={class:"flex items-center justify-between"},oe={class:"flex items-center gap-4"},ne={class:"flex items-center gap-2"},ie={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ue={class:"lg:col-span-2 space-y-6"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},me={class:"text-sm text-gray-500 mt-1"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pe={class:"space-y-6"},ve={class:"flex justify-between items-center"},ce={class:"font-mono text-sm font-medium"},ge={class:"flex justify-between items-center"},ke={class:"text-sm font-medium"},be={class:"flex justify-between items-center"},ye={class:"text-sm font-medium"},we={class:"flex justify-between items-center"},xe={class:"text-sm font-medium text-green-600"},Ce={class:"flex justify-between items-center"},_e={class:"text-sm font-medium text-orange-600"},Le=Y({__name:"edit",setup(Ve){const v=Z(),f=O(),N=A(!0),u=A(null),i=A({name:"",email:"",phone:"",status:"active",commissionRate:10,commissionType:"percentage",bankDetails:{bankName:"",accountHolder:"",accountNumber:"",swiftCode:""},notes:""}),H=K(()=>{var r;return[{count:1,label:"Affiliates",href:"/studio/affiliates",action:!1},{count:2,label:((r=u.value)==null?void 0:r.name)||"Loading...",href:`/studio/affiliates/${f.params.id}`,action:!1},{count:3,label:"Edit",href:f.fullPath,action:!1}]}),U={1:{id:"1",name:"Sarah Johnson",email:"sarah.johnson@email.com",phone:"+60123456789",joinDate:new Date("2024-01-15"),status:"active",commissionRate:15,commissionType:"percentage",totalReferrals:12,totalCommissionsEarned:4500,unpaidCommissions:850,paidCommissions:3650,referralCode:"SAR001",lastActivity:new Date("2024-02-01"),bankDetails:{bankName:"Maybank",accountNumber:"1234567890",accountHolder:"Sarah Johnson",swiftCode:"MBBEMYKL"},notes:"High-performing affiliate with excellent conversion rates. Specializes in corporate events and weddings."},2:{id:"2",name:"Ahmad Hassan",email:"ahmad.hassan@email.com",phone:"+60187654321",joinDate:new Date("2024-01-10"),status:"active",commissionRate:50,commissionType:"fixed",totalReferrals:8,totalCommissionsEarned:2800,unpaidCommissions:400,paidCommissions:2400,referralCode:"AHM002",lastActivity:new Date("2024-01-28"),bankDetails:{bankName:"CIMB Bank",accountNumber:"9876543210",accountHolder:"Ahmad Hassan"}}},L=r=>new Intl.DateTimeFormat("en-MY",{year:"numeric",month:"short",day:"numeric"}).format(r),P=()=>{v.push(`/studio/affiliates/${f.params.id}`)},h=()=>{v.push(`/studio/affiliates/${f.params.id}`)},I=()=>{v.push(`/studio/affiliates/${f.params.id}/commissions`)},z=async()=>{try{console.log("Saving affiliate:",i.value),await new Promise(r=>setTimeout(r,1e3)),v.push(`/studio/affiliates/${f.params.id}`)}catch(r){console.error("Error saving affiliate:",r)}},F=()=>{i.value.status="active"},J=()=>{i.value.status="inactive"},W=()=>{console.log("Send email to:",i.value.email)},q=async()=>{var r,e,n,C;try{N.value=!0,await new Promise(_=>setTimeout(_,1e3));const c=f.params.id;if(u.value=U[c]||null,!u.value){v.push("/studio/affiliates");return}i.value={name:u.value.name,email:u.value.email,phone:u.value.phone||"",status:u.value.status,commissionRate:u.value.commissionRate,commissionType:u.value.commissionType,bankDetails:{bankName:((r=u.value.bankDetails)==null?void 0:r.bankName)||"",accountHolder:((e=u.value.bankDetails)==null?void 0:e.accountHolder)||"",accountNumber:((n=u.value.bankDetails)==null?void 0:n.accountNumber)||"",swiftCode:((C=u.value.bankDetails)==null?void 0:C.swiftCode)||""},notes:u.value.notes||""}}catch(c){console.error("Error fetching affiliate:",c),v.push("/studio/affiliates")}finally{N.value=!1}};return G(()=>{q()}),(r,e)=>(V(),Q("div",le,[N.value?(V(),j(t(ae),{key:0,title:"Loading affiliate details",description:"We're fetching the affiliate information for editing."})):X("",!0),a(ee,{breadcrumb:H.value},null,8,["breadcrumb"]),s("div",se,[s("div",oe,[a(t(p),{onClick:P,variant:"ghost",size:"sm",class:"flex items-center gap-2"},{default:l(()=>e[11]||(e[11]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),o(" Back ")])),_:1}),e[12]||(e[12]=s("div",null,[s("h1",{class:"text-2xl font-semibold text-gray-900"}," Edit Affiliate "),s("p",{class:"text-sm text-gray-600 mt-1"}," Update affiliate information and settings ")],-1))]),s("div",ne,[a(t(p),{onClick:h,variant:"outline",class:"flex items-center gap-2"},{default:l(()=>e[13]||(e[13]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),o(" View Details ")])),_:1}),a(t(p),{onClick:z,class:"flex items-center gap-2"},{default:l(()=>e[14]||(e[14]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),o(" Save Changes ")])),_:1})])]),s("div",ie,[s("div",ue,[a(t(k),null,{default:l(()=>[a(t(y),null,{default:l(()=>[a(t(w),null,{default:l(()=>e[15]||(e[15]=[o("Basic Information")])),_:1}),a(t(D),null,{default:l(()=>e[16]||(e[16]=[o("Update the affiliate's contact information")])),_:1})]),_:1}),a(t(b),{class:"space-y-4"},{default:l(()=>[s("div",re,[s("div",null,[a(t(d),{for:"name"},{default:l(()=>e[17]||(e[17]=[o("Full Name *")])),_:1}),a(t(m),{id:"name",modelValue:i.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value.name=n),placeholder:"Enter full name",required:""},null,8,["modelValue"])]),s("div",null,[a(t(d),{for:"email"},{default:l(()=>e[18]||(e[18]=[o("Email Address *")])),_:1}),a(t(m),{id:"email",modelValue:i.value.email,"onUpdate:modelValue":e[1]||(e[1]=n=>i.value.email=n),type:"email",placeholder:"Enter email address",required:""},null,8,["modelValue"])]),s("div",null,[a(t(d),{for:"phone"},{default:l(()=>e[19]||(e[19]=[o("Phone Number")])),_:1}),a(t(m),{id:"phone",modelValue:i.value.phone,"onUpdate:modelValue":e[2]||(e[2]=n=>i.value.phone=n),placeholder:"Enter phone number"},null,8,["modelValue"])]),s("div",null,[a(t(d),{for:"status"},{default:l(()=>e[20]||(e[20]=[o("Status")])),_:1}),a(t(B),{modelValue:i.value.status,"onUpdate:modelValue":e[3]||(e[3]=n=>i.value.status=n)},{default:l(()=>[a(t(T),null,{default:l(()=>[a(t($),{placeholder:"Select status"})]),_:1}),a(t(S),null,{default:l(()=>[a(t(x),{value:"active"},{default:l(()=>e[21]||(e[21]=[o("Active")])),_:1}),a(t(x),{value:"inactive"},{default:l(()=>e[22]||(e[22]=[o("Inactive")])),_:1}),a(t(x),{value:"pending"},{default:l(()=>e[23]||(e[23]=[o("Pending")])),_:1}),a(t(x),{value:"suspended"},{default:l(()=>e[24]||(e[24]=[o("Suspended")])),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),_:1}),a(t(k),null,{default:l(()=>[a(t(y),null,{default:l(()=>[a(t(w),null,{default:l(()=>e[25]||(e[25]=[o("Commission Settings")])),_:1}),a(t(D),null,{default:l(()=>e[26]||(e[26]=[o("Configure commission rates for this affiliate")])),_:1})]),_:1}),a(t(b),{class:"space-y-4"},{default:l(()=>[s("div",de,[s("div",null,[a(t(d),{for:"commissionType"},{default:l(()=>e[27]||(e[27]=[o("Commission Type")])),_:1}),a(t(B),{modelValue:i.value.commissionType,"onUpdate:modelValue":e[4]||(e[4]=n=>i.value.commissionType=n)},{default:l(()=>[a(t(T),null,{default:l(()=>[a(t($),{placeholder:"Select commission type"})]),_:1}),a(t(S),null,{default:l(()=>[a(t(x),{value:"percentage"},{default:l(()=>e[28]||(e[28]=[o("Percentage (%)")])),_:1}),a(t(x),{value:"fixed"},{default:l(()=>e[29]||(e[29]=[o("Fixed Amount (RM)")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[a(t(d),{for:"commissionRate"},{default:l(()=>e[30]||(e[30]=[o("Commission Rate")])),_:1}),a(t(m),{id:"commissionRate",modelValue:i.value.commissionRate,"onUpdate:modelValue":e[5]||(e[5]=n=>i.value.commissionRate=n),modelModifiers:{number:!0},type:"number",placeholder:i.value.commissionType==="percentage"?"10":"50"},null,8,["modelValue","placeholder"]),s("p",me,g(i.value.commissionType==="percentage"?"Percentage of booking value":"Fixed amount in RM"),1)])])]),_:1})]),_:1}),a(t(k),null,{default:l(()=>[a(t(y),null,{default:l(()=>[a(t(w),null,{default:l(()=>e[31]||(e[31]=[o("Bank Details")])),_:1}),a(t(D),null,{default:l(()=>e[32]||(e[32]=[o("Payment information for commission payouts")])),_:1})]),_:1}),a(t(b),{class:"space-y-4"},{default:l(()=>[s("div",fe,[s("div",null,[a(t(d),{for:"bankName"},{default:l(()=>e[33]||(e[33]=[o("Bank Name")])),_:1}),a(t(m),{id:"bankName",modelValue:i.value.bankDetails.bankName,"onUpdate:modelValue":e[6]||(e[6]=n=>i.value.bankDetails.bankName=n),placeholder:"Enter bank name"},null,8,["modelValue"])]),s("div",null,[a(t(d),{for:"accountHolder"},{default:l(()=>e[34]||(e[34]=[o("Account Holder Name")])),_:1}),a(t(m),{id:"accountHolder",modelValue:i.value.bankDetails.accountHolder,"onUpdate:modelValue":e[7]||(e[7]=n=>i.value.bankDetails.accountHolder=n),placeholder:"Enter account holder name"},null,8,["modelValue"])]),s("div",null,[a(t(d),{for:"accountNumber"},{default:l(()=>e[35]||(e[35]=[o("Account Number")])),_:1}),a(t(m),{id:"accountNumber",modelValue:i.value.bankDetails.accountNumber,"onUpdate:modelValue":e[8]||(e[8]=n=>i.value.bankDetails.accountNumber=n),placeholder:"Enter account number"},null,8,["modelValue"])]),s("div",null,[a(t(d),{for:"swiftCode"},{default:l(()=>e[36]||(e[36]=[o("SWIFT Code (Optional)")])),_:1}),a(t(m),{id:"swiftCode",modelValue:i.value.bankDetails.swiftCode,"onUpdate:modelValue":e[9]||(e[9]=n=>i.value.bankDetails.swiftCode=n),placeholder:"Enter SWIFT code"},null,8,["modelValue"])])])]),_:1})]),_:1}),a(t(k),null,{default:l(()=>[a(t(y),null,{default:l(()=>[a(t(w),null,{default:l(()=>e[37]||(e[37]=[o("Notes")])),_:1}),a(t(D),null,{default:l(()=>e[38]||(e[38]=[o("Additional information about this affiliate")])),_:1})]),_:1}),a(t(b),null,{default:l(()=>[a(t(te),{modelValue:i.value.notes,"onUpdate:modelValue":e[10]||(e[10]=n=>i.value.notes=n),placeholder:"Enter any additional notes or comments...",rows:"4"},null,8,["modelValue"])]),_:1})]),_:1})]),s("div",pe,[a(t(k),null,{default:l(()=>[a(t(y),null,{default:l(()=>[a(t(w),null,{default:l(()=>e[39]||(e[39]=[o("Affiliate Summary")])),_:1})]),_:1}),a(t(b),{class:"space-y-4"},{default:l(()=>{var n,C,c,_,M,R,E;return[s("div",ve,[e[40]||(e[40]=s("span",{class:"text-sm text-gray-600"},"Referral Code",-1)),s("span",ce,g(((n=u.value)==null?void 0:n.referralCode)||"N/A"),1)]),s("div",ge,[e[41]||(e[41]=s("span",{class:"text-sm text-gray-600"},"Join Date",-1)),s("span",ke,g((C=u.value)!=null&&C.joinDate?L(u.value.joinDate):"N/A"),1)]),s("div",be,[e[42]||(e[42]=s("span",{class:"text-sm text-gray-600"},"Total Referrals",-1)),s("span",ye,g(((c=u.value)==null?void 0:c.totalReferrals)||0),1)]),s("div",we,[e[43]||(e[43]=s("span",{class:"text-sm text-gray-600"},"Total Earnings",-1)),s("span",xe," RM "+g(((M=(_=u.value)==null?void 0:_.totalCommissionsEarned)==null?void 0:M.toLocaleString())||"0"),1)]),s("div",Ce,[e[44]||(e[44]=s("span",{class:"text-sm text-gray-600"},"Pending Payout",-1)),s("span",_e," RM "+g(((E=(R=u.value)==null?void 0:R.unpaidCommissions)==null?void 0:E.toLocaleString())||"0"),1)])]}),_:1})]),_:1}),a(t(k),null,{default:l(()=>[a(t(y),null,{default:l(()=>[a(t(w),null,{default:l(()=>e[45]||(e[45]=[o("Actions")])),_:1})]),_:1}),a(t(b),{class:"space-y-3"},{default:l(()=>{var n;return[a(t(p),{onClick:I,variant:"outline",class:"w-full justify-start"},{default:l(()=>e[46]||(e[46]=[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),o(" View Commissions ")])),_:1}),a(t(p),{onClick:W,variant:"outline",class:"w-full justify-start"},{default:l(()=>e[47]||(e[47]=[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),o(" Send Email ")])),_:1}),((n=u.value)==null?void 0:n.status)==="active"?(V(),j(t(p),{key:0,onClick:J,variant:"outline",class:"w-full justify-start text-orange-600 hover:text-orange-700"},{default:l(()=>e[48]||(e[48]=[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})],-1),o(" Deactivate ")])),_:1})):(V(),j(t(p),{key:1,onClick:F,variant:"outline",class:"w-full justify-start text-green-600 hover:text-green-700"},{default:l(()=>e[49]||(e[49]=[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),o(" Activate ")])),_:1}))]}),_:1})]),_:1})])])]))}});export{Le as default};
