import{d as O,r as f,ag as X,D as Z,o as ee,c,v as te,f as o,g as s,b as e,t as i,w as n,_ as v,h as m,T as _,Q as L,U as T,ad as oe,aP as se,k as ae,l as u}from"./index-C2UrP5hw.js";import{_ as ne}from"./PageHeader.vue_vue_type_script_setup_true_lang-B1Je6Lxx.js";import{_ as b,a as C}from"./CardContent.vue_vue_type_script_setup_true_lang-eN_1_cPI.js";import{_ as M,a as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-Q0gFftlI.js";import{L as le}from"./LoadingPage-DgCemYQp.js";const re={class:"space-y-6"},ie={key:1},de={class:"flex items-center justify-between"},ue={class:"text-2xl font-semibold text-gray-900"},ce={class:"flex gap-3"},me={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},pe={class:"lg:col-span-3"},ve={class:"flex items-center space-x-3"},he={class:"text-sm text-gray-600 mt-1"},ge={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ye={class:"font-medium text-sm"},we={class:"text-xs text-gray-500 mt-1"},ke={class:"relative"},xe={class:"absolute bottom-2 right-2 text-xs text-gray-500"},_e={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center"},be={key:0,class:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3"},Ce={class:"aspect-square bg-gray-100 rounded-lg overflow-hidden"},Me=["src","alt"],Ae={key:1,class:"w-full h-full flex items-center justify-center"},je={class:"mt-1 text-xs text-gray-600 truncate"},Be={class:"flex items-center justify-between pt-4 border-t"},Le={class:"flex items-center space-x-4"},Te={class:"space-y-6"},We={class:"text-gray-900"},$e={class:"text-gray-900"},He={class:"text-gray-900"},Se={key:0},ze={class:"text-gray-900"},Fe={class:"space-y-3"},Ie={class:"text-sm truncate"},De={class:"text-xs text-gray-500 mt-1"},Pe={class:"text-xs text-gray-600 mt-1"},Ve={key:0,class:"text-sm text-gray-500 text-center py-4"},Qe=O({__name:"whatsapp",setup(Ne){const w=X(),j=ae(),B=f(!0),x=f(!1),l=f(null),W=f(null),S=[{count:1,label:"Contacts",href:"/studio/contacts",action:!1},{count:2,label:"Contact Details",href:`/studio/contacts/${w.params.id}`,action:!1},{count:3,label:"Send WhatsApp",href:"",action:!1}],p=f({content:""}),k=f([]),z=[{id:"greeting",name:"Greeting",preview:"Hi! Hope you're doing well...",content:"Hi {{name}}! Hope you're doing well. Just wanted to reach out and see if you have any questions about your upcoming photography session."},{id:"reminder",name:"Session Reminder",preview:"Reminder about your session...",content:"Hi {{name}}! This is a friendly reminder about your photography session scheduled for [DATE] at [TIME]. Looking forward to working with you!"},{id:"delivery",name:"Photos Ready",preview:"Your photos are ready! ðŸ“¸",content:"Hi {{name}}! Great news - your photos are ready for download! ðŸ“¸ You can access them here: [LINK]. Hope you love them as much as I enjoyed capturing them!"},{id:"followup",name:"Follow-up",preview:"Following up on our conversation...",content:"Hi {{name}}! Following up on our conversation about your photography needs. Please let me know if you have any questions or if you'd like to schedule a consultation."},{id:"thank_you",name:"Thank You",preview:"Thank you for choosing us!",content:"Hi {{name}}! Thank you so much for choosing us for your photography needs. It was a pleasure working with you! ðŸ™"},{id:"portfolio",name:"Portfolio Share",preview:"Check out some recent work...",content:"Hi {{name}}! I thought you might like to see some recent work. Check out my latest portfolio: [LINK]. Let me know what you think!"}],$=f([{id:"1",content:"Thank you for the beautiful photos! We love them! ðŸ˜",date:new Date("2024-01-28"),status:"delivered"},{id:"2",content:"Hi! Following up on our photography session booking...",date:new Date("2024-01-25"),status:"read"}]),F=Z(()=>p.value.content.length),I=a=>new Intl.DateTimeFormat("en-MY",{year:"numeric",month:"short",day:"numeric"}).format(a),D=async()=>{B.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),l.value={id:w.params.id,name:"Sarah Johnson",email:"sarah.johnson@email.com",phone:"+60123456789",company:"Johnson & Associates",status:"client",source:"website",createdAt:new Date("2024-01-15"),lastContactDate:new Date("2024-02-01")}}catch(a){console.error("Error loading contact:",a)}finally{B.value=!1}},P=a=>{l.value&&(p.value.content=a.content.replace(/{{name}}/g,l.value.name))},V=()=>{},N=()=>{var a;(a=W.value)==null||a.click()},R=a=>{const t=a.target;if(t.files)for(const h of Array.from(t.files))h.size<=16*1024*1024?k.value.push(h):alert(`File ${h.name} is too large. Maximum size is 16MB.`)},U=a=>{k.value.splice(a,1)},E=a=>URL.createObjectURL(a),q=()=>{j.push(`/studio/contacts/${w.params.id}`)},H=()=>{var a;if((a=l.value)!=null&&a.phone){const t=l.value.phone.replace(/[^\d]/g,""),h=encodeURIComponent(p.value.content),r=`https://wa.me/${t}?text=${h}`;window.open(r,"_blank")}},Y=()=>{console.log("Preview message")},J=()=>{console.log("Save template")},Q=async()=>{var a;if(!(!((a=l.value)!=null&&a.phone)||!p.value.content.trim())){x.value=!0;try{await new Promise(t=>setTimeout(t,2e3)),console.log("WhatsApp message sent",{to:l.value.phone,message:p.value.content,mediaFiles:k.value}),H(),j.push(`/studio/contacts/${w.params.id}`)}catch(t){console.error("Error sending WhatsApp message:",t)}finally{x.value=!1}}},G=()=>{j.push(`/studio/contacts/${w.params.id}/email`)},K=()=>{var a;(a=l.value)!=null&&a.phone&&(window.location.href=`tel:${l.value.phone}`)};return ee(()=>{D()}),(a,t)=>{var h;return u(),c("div",re,[B.value?(u(),te(o(le),{key:0,title:"Loading WhatsApp messenger",description:"Setting up WhatsApp interface for this contact."})):(u(),c("div",ie,[s(ne,{breadcrumb:S}),e("div",de,[e("div",null,[e("h1",ue," Send WhatsApp to "+i((h=l.value)==null?void 0:h.name),1),t[1]||(t[1]=e("p",{class:"text-sm text-gray-600 mt-1"}," Send quick messages and share media via WhatsApp ",-1))]),e("div",ce,[s(o(v),{variant:"outline",onClick:q},{default:n(()=>t[2]||(t[2]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),m(" Back to Contact ")])),_:1}),s(o(v),{variant:"outline",onClick:H,class:"bg-green-50 hover:bg-green-100 text-green-700 border-green-200"},{default:n(()=>t[3]||(t[3]=[e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.087"})],-1),m(" Open WhatsApp Web ")])),_:1})])]),e("div",me,[e("div",pe,[s(o(b),null,{default:n(()=>[s(o(M),null,{default:n(()=>{var r,g;return[e("div",ve,[t[5]||(t[5]=e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.087"})])],-1)),e("div",null,[s(o(A),null,{default:n(()=>t[4]||(t[4]=[m("Send WhatsApp Message")])),_:1}),e("p",he,i((r=l.value)==null?void 0:r.name)+" â€¢ "+i(((g=l.value)==null?void 0:g.phone)||"No phone number"),1)])])]}),_:1}),s(o(C),{class:"space-y-6"},{default:n(()=>{var r,g;return[(r=l.value)!=null&&r.phone?_("",!0):(u(),c("div",ge,t[6]||(t[6]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.996-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})]),e("span",{class:"text-yellow-700"},"This contact doesn't have a phone number. Please add one to send WhatsApp messages.")],-1)]))),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Quick Templates ",-1)),e("div",fe,[(u(),c(L,null,T(z,d=>s(o(v),{key:d.id,variant:"outline",size:"sm",class:"text-left justify-start h-auto p-3",onClick:y=>P(d)},{default:n(()=>[e("div",null,[e("div",ye,i(d.name),1),e("div",we,i(d.preview),1)])]),_:2},1032,["onClick"])),64))])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Message ",-1)),e("div",ke,[oe(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=d=>p.value.content=d),rows:"6",class:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-1 focus:ring-green-500 pr-16",placeholder:"Type your WhatsApp message here...",maxlength:"4096",onInput:V},null,544),[[se,p.value.content]]),e("div",xe,i(F.value)+"/4096 ",1)])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Media Attachments ",-1)),e("div",_e,[t[10]||(t[10]=e("svg",{class:"w-8 h-8 mx-auto text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t[11]||(t[11]=e("p",{class:"text-sm text-gray-600 mb-2"},"Upload photos, videos, or documents",-1)),t[12]||(t[12]=e("p",{class:"text-xs text-gray-500 mb-3"},"Max 16MB per file",-1)),s(o(v),{variant:"outline",size:"sm",onClick:N},{default:n(()=>t[9]||(t[9]=[m(" Choose Files ")])),_:1}),e("input",{ref_key:"fileInput",ref:W,type:"file",multiple:"",accept:"image/*,video/*,.pdf,.doc,.docx",class:"hidden",onChange:R},null,544)]),k.value.length>0?(u(),c("div",be,[(u(!0),c(L,null,T(k.value,(d,y)=>(u(),c("div",{key:y,class:"relative group"},[e("div",Ce,[d.type.startsWith("image/")?(u(),c("img",{key:0,src:E(d),alt:d.name,class:"w-full h-full object-cover"},null,8,Me)):(u(),c("div",Ae,t[13]||(t[13]=[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])))]),s(o(v),{variant:"destructive",size:"sm",class:"absolute -top-2 -right-2 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:Re=>U(y)},{default:n(()=>t[14]||(t[14]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),_:2},1032,["onClick"]),e("div",je,i(d.name),1)]))),128))])):_("",!0)]),e("div",Be,[e("div",Le,[s(o(v),{variant:"outline",onClick:Y,disabled:!p.value.content.trim()},{default:n(()=>t[16]||(t[16]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),m(" Preview ")])),_:1},8,["disabled"]),s(o(v),{variant:"outline",onClick:J,disabled:!p.value.content.trim()},{default:n(()=>t[17]||(t[17]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})],-1),m(" Save as Template ")])),_:1},8,["disabled"])]),s(o(v),{onClick:Q,disabled:!((g=l.value)!=null&&g.phone)||!p.value.content.trim()||x.value,class:"bg-green-600 hover:bg-green-700 text-white"},{default:n(()=>[t[18]||(t[18]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.087"})],-1)),m(" "+i(x.value?"Sending...":"Send WhatsApp"),1)]),_:1},8,["disabled"])])]}),_:1})]),_:1})]),e("div",Te,[s(o(b),null,{default:n(()=>[s(o(M),null,{default:n(()=>[s(o(A),null,{default:n(()=>t[19]||(t[19]=[m("Contact Info")])),_:1})]),_:1}),s(o(C),{class:"space-y-3"},{default:n(()=>{var r,g,d,y;return[e("div",null,[t[20]||(t[20]=e("div",{class:"text-sm font-medium text-gray-700"},"Name",-1)),e("div",We,i((r=l.value)==null?void 0:r.name),1)]),e("div",null,[t[21]||(t[21]=e("div",{class:"text-sm font-medium text-gray-700"},"Phone",-1)),e("div",$e,i(((g=l.value)==null?void 0:g.phone)||"Not provided"),1)]),e("div",null,[t[22]||(t[22]=e("div",{class:"text-sm font-medium text-gray-700"},"Email",-1)),e("div",He,i((d=l.value)==null?void 0:d.email),1)]),(y=l.value)!=null&&y.company?(u(),c("div",Se,[t[23]||(t[23]=e("div",{class:"text-sm font-medium text-gray-700"},"Company",-1)),e("div",ze,i(l.value.company),1)])):_("",!0)]}),_:1})]),_:1}),s(o(b),null,{default:n(()=>[s(o(M),null,{default:n(()=>[s(o(A),null,{default:n(()=>t[24]||(t[24]=[m("Recent Messages")])),_:1})]),_:1}),s(o(C),null,{default:n(()=>[e("div",Fe,[(u(!0),c(L,null,T($.value,r=>(u(),c("div",{key:r.id,class:"p-3 bg-gray-50 rounded-lg"},[e("div",Ie,i(r.content),1),e("div",De,i(I(r.date)),1),e("div",Pe,i(r.status),1)]))),128)),$.value.length===0?(u(),c("div",Ve," No previous messages ")):_("",!0)])]),_:1})]),_:1}),s(o(b),null,{default:n(()=>[s(o(M),null,{default:n(()=>[s(o(A),null,{default:n(()=>t[25]||(t[25]=[m("Quick Actions")])),_:1})]),_:1}),s(o(C),{class:"space-y-2"},{default:n(()=>[s(o(v),{variant:"outline",size:"sm",class:"w-full justify-start",onClick:G},{default:n(()=>t[26]||(t[26]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),m(" Send Email Instead ")])),_:1}),s(o(v),{variant:"outline",size:"sm",class:"w-full justify-start",onClick:K},{default:n(()=>t[27]||(t[27]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1),m(" Call Contact ")])),_:1})]),_:1})]),_:1})])])]))])}}});export{Qe as default};
