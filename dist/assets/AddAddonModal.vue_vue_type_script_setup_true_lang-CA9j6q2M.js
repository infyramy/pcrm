import{d as V,r as b,D,H as P,v as $,w as r,f as o,g as s,b as f,h as c,t as v,j as k,_ as Q,K as w,l as C}from"./index-DWMcEsZL.js";import{_ as A,a as g}from"./Label.vue_vue_type_script_setup_true_lang-DUwXJ6qU.js";import{_ as M}from"./Textarea.vue_vue_type_script_setup_true_lang-B1BXL8iq.js";import{_ as U,b as E,c as S,d as I,a as T}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C_3-4gPP.js";import{_ as B}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CFXF2yCi.js";const m=[{id:"1",name:"Drone Photography",price:300,description:"Aerial shots and unique perspectives from above",maxQuantity:1,isActive:!0,createdAt:new Date("2024-01-15")},{id:"2",name:"Photo Album",price:150,description:"Premium printed photo album with 50 pages",maxQuantity:3,isActive:!0,createdAt:new Date("2024-01-16")},{id:"3",name:"Extra Hour",price:200,description:"Additional hour of photography coverage",maxQuantity:5,isActive:!0,createdAt:new Date("2024-01-17")},{id:"4",name:"Video Highlights",price:500,description:"Short highlight video of your session",maxQuantity:1,isActive:!0,createdAt:new Date("2024-01-18")},{id:"5",name:"Makeup Artist",price:250,description:"Professional makeup artist for the session",maxQuantity:1,isActive:!0,createdAt:new Date("2024-01-19")},{id:"6",name:"Props Package",price:80,description:"Collection of themed props for your shoot",maxQuantity:2,isActive:!0,createdAt:new Date("2024-01-20")}],N={async getAddons(d=1,i=50){await new Promise(a=>setTimeout(a,800));const e=(d-1)*i,l=e+i;return{addons:m.slice(e,l),total:m.length,page:d,limit:i}},async getAddon(d){await new Promise(e=>setTimeout(e,300));const i=m.find(e=>e.id===d);if(!i)throw new Error(`Addon with id ${d} not found`);return i},async createAddon(d){await new Promise(e=>setTimeout(e,500));const i={id:Date.now().toString(),name:d.name,price:d.price,description:d.description,maxQuantity:d.maxQuantity,isActive:!0,createdAt:new Date};return m.push(i),i},async updateAddon(d,i){await new Promise(u=>setTimeout(u,500));const e=m.findIndex(u=>u.id===d);if(e===-1)throw new Error(`Addon with id ${d} not found`);const l={...m[e],...i,updatedAt:new Date};return m[e]=l,l},async deleteAddon(d){await new Promise(e=>setTimeout(e,300));const i=m.findIndex(e=>e.id===d);if(i===-1)throw new Error(`Addon with id ${d} not found`);m.splice(i,1)}},q={class:"space-y-2"},H={class:"space-y-2"},O={class:"space-y-2"},F={class:"space-y-2"},G=V({__name:"AddAddonModal",props:{isOpen:{type:Boolean},editingAddon:{}},emits:["update:open","addon-added","addon-updated"],setup(d,{emit:i}){const e=d,l=i,u=b(!1),a=b({name:"",price:0,description:"",maxQuantity:1}),x=D(()=>a.value.name.trim()!==""&&a.value.price>0&&a.value.maxQuantity>0),y=()=>{a.value={name:"",price:0,description:"",maxQuantity:1}};P(()=>e.editingAddon,n=>{n?a.value={name:n.name,price:n.price,description:n.description||"",maxQuantity:n.maxQuantity}:y()},{immediate:!0});const h=async()=>{if(x.value)try{if(u.value=!0,e.editingAddon){const n={...e.editingAddon,name:a.value.name,price:a.value.price,description:a.value.description,maxQuantity:a.value.maxQuantity};w.success("Add-on updated successfully!"),l("addon-updated",n)}else{const n=await N.createAddon(a.value);w.success("Add-on added successfully!"),l("addon-added",n)}l("update:open",!1),y()}catch(n){console.error("Error saving addon:",n),w.error(`Failed to ${e.editingAddon?"update":"add"} add-on. Please try again.`)}finally{u.value=!1}},_=n=>{n||y(),l("update:open",n)};return(n,t)=>(C(),$(o(U),{open:n.isOpen,"onUpdate:open":_},{default:r(()=>[s(o(T),{class:"sm:max-w-[425px]"},{default:r(()=>[s(o(E),null,{default:r(()=>[s(o(S),null,{default:r(()=>[c(v(n.editingAddon?"Edit Add-on":"Add New Add-on"),1)]),_:1}),s(o(I),null,{default:r(()=>[c(v(n.editingAddon?"Update the add-on details.":"Create a new add-on that clients can add to their bookings."),1)]),_:1})]),_:1}),f("form",{onSubmit:k(h,["prevent"]),class:"space-y-4"},[f("div",q,[s(o(A),{for:"name"},{default:r(()=>t[5]||(t[5]=[c("Add-on Name *")])),_:1}),s(o(g),{id:"name",modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=p=>a.value.name=p),placeholder:"e.g., Drone Photography, Photo Album, Extra Hour",required:""},null,8,["modelValue"])]),f("div",H,[s(o(A),{for:"price"},{default:r(()=>t[6]||(t[6]=[c("Price (MYR) *")])),_:1}),s(o(g),{id:"price",modelValue:a.value.price,"onUpdate:modelValue":t[1]||(t[1]=p=>a.value.price=p),modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",placeholder:"0.00",required:""},null,8,["modelValue"])]),f("div",O,[s(o(A),{for:"maxQuantity"},{default:r(()=>t[7]||(t[7]=[c("Maximum Quantity *")])),_:1}),s(o(g),{id:"maxQuantity",modelValue:a.value.maxQuantity,"onUpdate:modelValue":t[2]||(t[2]=p=>a.value.maxQuantity=p),modelModifiers:{number:!0},type:"number",min:"1",placeholder:"1",required:""},null,8,["modelValue"]),t[8]||(t[8]=f("p",{class:"text-xs text-gray-500"}," Maximum number of this add-on a client can select ",-1))]),f("div",F,[s(o(A),{for:"description"},{default:r(()=>t[9]||(t[9]=[c("Description (Optional)")])),_:1}),s(o(M),{id:"description",modelValue:a.value.description,"onUpdate:modelValue":t[3]||(t[3]=p=>a.value.description=p),placeholder:"Brief description of what this add-on includes...",rows:"3"},null,8,["modelValue"])])],32),s(o(B),null,{default:r(()=>[s(o(Q),{type:"button",variant:"outline",onClick:t[4]||(t[4]=p=>_(!1)),disabled:u.value},{default:r(()=>t[10]||(t[10]=[c(" Cancel ")])),_:1},8,["disabled"]),s(o(Q),{type:"submit",onClick:h,disabled:!x.value||u.value},{default:r(()=>[c(v(u.value?e.editingAddon?"Updating...":"Adding...":e.editingAddon?"Update Add-on":"Add Add-on"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}});export{G as _,N as a};
