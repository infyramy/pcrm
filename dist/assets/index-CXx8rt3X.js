import{d as fe,r as _,D as ye,o as xe,c as n,b as s,g as o,w as r,f as l,K as F,T as v,h as u,t as c,_ as y,a2 as U,Q as b,U as h,W as q,v as V,ac as Q,ad as A,ae as be,af as P,C as he,k as ke,aa as _e,l as d,ab as we}from"./index-C2UrP5hw.js";import{_ as Se,a as Ve}from"./CardContent.vue_vue_type_script_setup_true_lang-eN_1_cPI.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-CSZ-Dkyw.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-DVjpD-L7.js";import{_ as M}from"./Textarea.vue_vue_type_script_setup_true_lang--1zaO6ew.js";import{_ as $}from"./Switch.vue_vue_type_script_setup_true_lang-Dig9Qbto.js";import{_ as Y}from"./index-BFTYKSG-.js";import{_ as Ce,a as Te,b as Ue,c as Ae,d as S}from"./SelectValue.vue_vue_type_script_setup_true_lang-BJhQFqbJ.js";import{s as Fe,P as K}from"./sessionTypes-C4leSnHL.js";import{_ as Pe,a as Me}from"./AddAddonModal.vue_vue_type_script_setup_true_lang-xUEZGAPh.js";import{_ as $e}from"./AddSessionTypeModal.vue_vue_type_script_setup_true_lang-C-dPntcW.js";import{I as G}from"./info-fY2g-SHG.js";import{C as X}from"./check-CMqAtv7z.js";import{T as Re}from"./trash-DxdDRnnN.js";import"./useFormControl-BTKw-cda.js";import"./VisuallyHiddenInput-CveaDp_Q.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CGEsSMnb.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-CGpZvTRB.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-zsfmxkQJ.js";const Ne={class:"min-h-screen flex items-center justify-center p-4"},De={class:"w-full max-w-4xl"},je={key:0,class:"space-y-6"},ze={class:"space-y-4"},Ie={key:1,class:"space-y-6"},Oe={key:0,class:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-blue-50 dark:from-blue-900/20 dark:to-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},Ye={class:"flex items-center justify-between"},Be={class:"flex items-center gap-3"},Le={class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},Ee={class:"text-sm font-semibold text-blue-800 dark:text-blue-200"},We={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},He={class:"lg:col-span-2"},qe={class:"flex items-center justify-between mb-4"},Qe={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ke={key:1,class:"max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xe={class:"flex items-center justify-between"},Je=["onClick"],Ze={class:"font-medium text-gray-900 dark:text-gray-100"},es={class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},ss={class:"flex items-center gap-2"},ts={key:2,class:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg"},ls={class:"lg:col-span-1"},os={class:"sticky top-4"},is={class:"font-medium text-gray-900 dark:text-gray-100 mb-4"},as={key:0,class:"text-sm font-normal text-gray-500"},ds={key:0,class:"space-y-4"},rs={class:"max-h-80 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"},ns={class:"space-y-3"},us={class:"flex items-start justify-between mb-4"},ms={class:"flex-1"},cs={class:"font-semibold text-gray-900 dark:text-gray-100 mb-1"},ps={class:"flex items-center gap-2"},vs={class:"space-y-2"},gs={class:"relative"},fs={key:1,class:"text-center py-8 border-2 border-dashed border-gray-200 rounded-lg"},ys={key:2,class:"space-y-6"},xs={key:0,class:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-blue-50 dark:from-blue-900/20 dark:to-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"},bs={class:"flex items-center justify-between"},hs={class:"flex items-center gap-3"},ks={class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},_s={class:"text-sm font-semibold text-blue-800 dark:text-blue-200"},ws={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ss={class:"lg:col-span-2"},Vs={class:"flex items-center justify-between mb-4"},Cs={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ts={key:1,class:"max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Us={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},As={class:"flex items-center justify-between"},Fs=["onClick"],Ps={class:"font-medium text-gray-900 dark:text-gray-100"},Ms={class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},$s={class:"flex items-center gap-2"},Rs={key:2,class:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg"},Ns={class:"lg:col-span-1"},Ds={class:"sticky top-4"},js={class:"font-medium text-gray-900 dark:text-gray-100 mb-4"},zs={key:0,class:"text-sm font-normal text-gray-500"},Is={key:0,class:"space-y-4"},Os={class:"max-h-80 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Ys={class:"space-y-3"},Bs={class:"flex items-start justify-between mb-4"},Ls={class:"flex-1"},Es={class:"font-semibold text-gray-900 dark:text-gray-100 mb-1"},Ws={class:"flex items-center gap-2 mb-2"},Hs={class:"space-y-3"},qs={class:"relative mt-1"},Qs={class:"flex items-center space-x-2"},Ks={key:0,class:"mt-3"},Gs={class:"mt-2 space-y-2"},Xs=["id","onUpdate:modelValue","value"],Js={key:1,class:"text-center py-8 border-2 border-dashed border-gray-200 rounded-lg"},Zs={key:3,class:"space-y-6"},et={class:"space-y-4"},st={class:"flex items-center justify-between"},tt={class:"flex items-center justify-between"},lt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ot={class:"flex items-center space-x-4"},it={class:"flex items-center space-x-2"},at={class:"flex items-center space-x-2"},dt={key:0,class:"mt-3"},rt={key:0,class:"text-center py-8 text-gray-500"},nt={key:4,class:"space-y-6"},ut={class:"space-y-6"},mt={class:"space-y-4"},ct={class:"space-y-3"},pt={class:"flex items-center space-x-2"},vt={key:0,class:"ml-6 space-y-3"},gt={class:"flex items-center space-x-2"},ft={class:"flex items-center space-x-2"},yt={key:5,class:"space-y-6"},xt={class:"space-y-6"},bt={key:6,class:"space-y-6"},ht={class:"space-y-6"},kt={class:"border rounded-lg p-6 bg-gray-50 dark:bg-gray-800"},_t={class:"space-y-4 max-h-96 overflow-y-auto"},wt={class:"text-lg font-semibold"},St={class:"text-gray-600 dark:text-gray-400"},Vt={key:0},Ct={class:"font-medium"},Tt={class:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400"},Ut={key:1},At={class:"font-medium"},Ft={class:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400"},Pt={key:2},Mt={class:"font-medium"},$t={class:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400"},Rt={class:"space-y-4"},Nt={class:"space-y-3"},Dt={class:"flex items-center space-x-2"},jt={class:"flex items-center space-x-2"},zt={class:"flex justify-end gap-4 pt-6 border-t"},It={key:1},Ot={class:"space-x-3"},Yt=fe({__name:"index",setup(Bt){const B=ke(),g=_(1),k=_([]),R=_(!1),C=_(!1),N=_(null),x=_([]),D=_(!1),T=_(!1),j=_(null),i=_({title:"",description:"",template:"",selectedSessionTypes:[],sessionTypes:[],selectedAddons:[],addons:[],customFields:[],termsAndConditions:"",termsCheckboxText:"I agree to the terms and conditions",priceSettings:{showPriceToClient:!0,priceDisplayMode:"per-item"},whatsappMessage:"",whatsappNumber:"",fallbackRedirectUrl:"",publishStatus:"draft"}),L=ye(()=>{switch(g.value){case 1:return i.value.title.trim()!=="";case 2:return i.value.selectedSessionTypes.length>0;case 3:return!0;case 4:return!0;case 5:return!0;case 6:return i.value.whatsappNumber.trim()!=="";default:return!0}}),J=()=>{g.value<7&&L.value&&g.value++},Z=()=>{g.value>1&&g.value--},ee=async()=>{try{R.value=!0;const a=await Fe.getSessionTypes();k.value=a.sessionTypes}catch(a){console.error("Error loading session types:",a),F.error("Failed to load session types")}finally{R.value=!1}},z=a=>i.value.selectedSessionTypes.some(e=>e.id===a),E=a=>{const e=i.value.selectedSessionTypes.findIndex(t=>t.id===a);if(e>-1)i.value.selectedSessionTypes.splice(e,1);else{const t=k.value.find(m=>m.id===a);i.value.selectedSessionTypes.push({id:a,customPrice:(t==null?void 0:t.price)||0})}},I=a=>{const e=k.value.find(t=>t.id===a);return(e==null?void 0:e.name)||"Unknown Session"},se=a=>{const e=i.value.selectedSessionTypes.find(m=>m.id===a);if((e==null?void 0:e.customPrice)!==void 0)return e.customPrice.toFixed(2);const t=k.value.find(m=>m.id===a);return(t==null?void 0:t.price.toFixed(2))||"0.00"},te=a=>{const e=k.value.find(t=>t.id===a);return(e==null?void 0:e.price.toFixed(2))||"0.00"},le=a=>{N.value=a,C.value=!0},oe=a=>{k.value.push(a),i.value.selectedSessionTypes.push({id:a.id,customPrice:a.price})},ie=a=>{const e=k.value.findIndex(t=>t.id===a.id);if(e>-1){k.value[e]=a;const t=i.value.selectedSessionTypes.findIndex(m=>m.id===a.id);t>-1&&(i.value.selectedSessionTypes[t].customPrice=a.price)}},ae=async()=>{try{D.value=!0;const a=await Me.getAddons();x.value=a.addons}catch(a){console.error("Error loading addons:",a),F.error("Failed to load add-ons")}finally{D.value=!1}},O=a=>i.value.selectedAddons.some(e=>e.id===a),W=a=>{const e=i.value.selectedAddons.findIndex(t=>t.id===a);if(e>-1)i.value.selectedAddons.splice(e,1);else{const t=x.value.find(m=>m.id===a);i.value.selectedAddons.push({id:a,customPrice:(t==null?void 0:t.price)||0,hasSessionRestriction:!1,availableForSessions:[]})}},H=a=>{const e=x.value.find(t=>t.id===a);return(e==null?void 0:e.name)||"Unknown Add-on"},de=a=>{const e=i.value.selectedAddons.find(m=>m.id===a);if((e==null?void 0:e.customPrice)!==void 0)return e.customPrice.toFixed(2);const t=x.value.find(m=>m.id===a);return(t==null?void 0:t.price.toFixed(2))||"0.00"},re=a=>{const e=x.value.find(t=>t.id===a);return(e==null?void 0:e.price.toFixed(2))||"0.00"},ne=a=>{const e=x.value.find(t=>t.id===a);return(e==null?void 0:e.maxQuantity)||1},ue=a=>{j.value=a,T.value=!0},me=a=>{x.value.push(a),i.value.selectedAddons.push({id:a.id,customPrice:a.price,hasSessionRestriction:!1,availableForSessions:[]})},ce=a=>{const e=x.value.findIndex(t=>t.id===a.id);if(e>-1){x.value[e]=a;const t=i.value.selectedAddons.findIndex(m=>m.id===a.id);t>-1&&(i.value.selectedAddons[t].customPrice=a.price)}},pe=()=>{i.value.customFields.push({label:"",type:"text",placeholder:"",required:!1,hasConditionalLogic:!1})},ve=a=>{i.value.customFields.splice(a,1)},ge=async()=>{try{console.log("Saving form:",i.value);const a=i.value.publishStatus==="published"?"published":"saved as draft";F.success(`Form ${a} successfully!`),B.push("/studio/forms")}catch(a){F.error("Failed to save form. Please try again."),console.error("Error saving form:",a)}};return xe(()=>{ee(),ae()}),(a,e)=>(d(),n("div",Ne,[s("div",De,[o(l(Se),{class:"my-8"},{default:r(()=>[o(l(Ve),{class:"p-6"},{default:r(()=>[g.value===1?(d(),n("div",je,[s("div",null,[e[21]||(e[21]=s("h2",{class:"text-xl font-semibold"},"Basic Information",-1)),e[22]||(e[22]=s("p",{class:"text-xs mb-4"}," Add the basic information for your form ",-1)),s("div",ze,[s("div",null,[o(l(p),{for:"title"},{default:r(()=>e[19]||(e[19]=[u("Form Title *")])),_:1}),o(l(w),{id:"title",modelValue:i.value.title,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.title=t),placeholder:"e.g., Wedding Photography Booking Form",class:"mt-1"},null,8,["modelValue"])]),s("div",null,[o(l(p),{for:"description"},{default:r(()=>e[20]||(e[20]=[u("Description / Intro Text")])),_:1}),o(l(M),{id:"description",modelValue:i.value.description,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.description=t),placeholder:"Welcome message or instructions for your clients...",class:"mt-1",rows:"3"},null,8,["modelValue"])])])])])):v("",!0),g.value===2?(d(),n("div",Ie,[s("div",null,[e[37]||(e[37]=s("h2",{class:"text-xl font-semibold mb-2"},"Session Types",-1)),e[38]||(e[38]=s("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Choose the photography sessions your clients can book. You can customize the price for each session in your form. ",-1)),i.value.selectedSessionTypes.length>0?(d(),n("div",Oe,[s("div",Ye,[s("div",Be,[s("div",Le,[o(l(G),{class:"w-4 h-4 text-white"})]),s("div",null,[s("span",Ee,c(i.value.selectedSessionTypes.length)+" session"+c(i.value.selectedSessionTypes.length>1?"s":"")+" selected ",1),e[23]||(e[23]=s("p",{class:"text-xs text-blue-600 dark:text-blue-300"}," Ready to proceed to next step ",-1))])])])])):v("",!0),s("div",We,[s("div",He,[s("div",qe,[e[25]||(e[25]=s("h3",{class:"font-medium text-gray-900 dark:text-gray-100"}," Available Sessions ",-1)),o(l(y),{onClick:e[2]||(e[2]=t=>C.value=!0),variant:"outline",size:"sm"},{default:r(()=>[o(l(U),{class:"w-4 h-4 mr-2"}),e[24]||(e[24]=u(" Add New Session "))]),_:1})]),R.value?(d(),n("div",Qe,[(d(),n(b,null,h(4,t=>s("div",{key:t,class:"border rounded-lg p-4 animate-pulse"},e[26]||(e[26]=[s("div",{class:"h-4 bg-gray-200 rounded mb-2"},null,-1),s("div",{class:"h-3 bg-gray-200 rounded mb-3"},null,-1),s("div",{class:"h-6 bg-gray-200 rounded"},null,-1)]))),64))])):k.value.length>0?(d(),n("div",Ke,[s("div",Ge,[(d(!0),n(b,null,h(k.value,t=>(d(),n("div",{key:t.id,class:q(["border rounded-lg p-3 transition-colors group",{"border-blue-500 bg-blue-50 dark:bg-blue-900/20":z(t.id),"border-gray-200 hover:border-gray-300":!z(t.id)}])},[s("div",Xe,[s("div",{onClick:m=>E(t.id),class:"flex-1 cursor-pointer"},[s("h4",Ze,c(t.name),1),s("div",es," MYR "+c(t.price.toFixed(2)),1)],8,Je),s("div",ss,[o(l(y),{onClick:m=>le(t),variant:"ghost",size:"sm",class:"opacity-0 group-hover:opacity-100 transition-opacity"},{default:r(()=>[o(l(K),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),z(t.id)?(d(),V(l(X),{key:0,class:"w-5 h-5 text-blue-500"})):v("",!0)])])],2))),128))])])):(d(),n("div",ts,[e[28]||(e[28]=s("div",{class:"mb-4"},[s("svg",{class:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1)),e[29]||(e[29]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"}," No session types available ",-1)),e[30]||(e[30]=s("p",{class:"text-gray-500 mb-4"}," Create your first session type to get started ",-1)),o(l(y),{onClick:e[3]||(e[3]=t=>C.value=!0),variant:"outline"},{default:r(()=>[o(l(U),{class:"w-4 h-4 mr-2"}),e[27]||(e[27]=u(" Add Session Type "))]),_:1})]))]),s("div",ls,[s("div",os,[s("h3",is,[e[31]||(e[31]=u(" Selected Sessions ")),i.value.selectedSessionTypes.length>0?(d(),n("span",as," ("+c(i.value.selectedSessionTypes.length)+") ",1)):v("",!0)]),i.value.selectedSessionTypes.length>0?(d(),n("div",ds,[s("div",rs,[s("div",ns,[(d(!0),n(b,null,h(i.value.selectedSessionTypes,t=>(d(),n("div",{key:t.id,class:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[s("div",us,[s("div",ms,[s("h5",cs,c(I(t.id)),1),s("div",ps,[e[32]||(e[32]=s("span",{class:"text-xs text-gray-500"},"Default:",-1)),o(l(Y),{variant:"outline",class:"text-xs px-2 py-0.5"},{default:r(()=>[u(" MYR "+c(te(t.id)),1)]),_:2},1024)])]),o(l(y),{onClick:m=>E(t.id),variant:"ghost",size:"sm",class:"text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 -mt-1 -mr-1"},{default:r(()=>[o(l(Q),{class:"w-4 h-4"})]),_:2},1032,["onClick"])]),s("div",vs,[o(l(p),{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},{default:r(()=>e[33]||(e[33]=[u(" Form Price (MYR) ")])),_:1}),s("div",gs,[o(l(w),{modelValue:t.customPrice,"onUpdate:modelValue":m=>t.customPrice=m,modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"w-full pl-12"},null,8,["modelValue","onUpdate:modelValue"]),e[34]||(e[34]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("span",{class:"text-gray-500 text-sm"},"MYR")],-1))]),e[35]||(e[35]=s("p",{class:"text-xs text-gray-500"}," This price will be shown to clients for this session ",-1))])]))),128))])])])):(d(),n("div",fs,e[36]||(e[36]=[s("div",{class:"mb-3"},[s("svg",{class:"w-8 h-8 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1),s("p",{class:"text-sm text-gray-500"}," Select sessions from the left to customize pricing ",-1)])))])])])])])):v("",!0),g.value===3?(d(),n("div",ys,[s("div",null,[e[56]||(e[56]=s("h2",{class:"text-xl font-semibold mb-2"},"Add-ons",-1)),e[57]||(e[57]=s("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Optional items clients can add to their booking. You can customize the price for each add-on in your form. ",-1)),i.value.selectedAddons.length>0?(d(),n("div",xs,[s("div",bs,[s("div",hs,[s("div",ks,[o(l(G),{class:"w-4 h-4 text-white"})]),s("div",null,[s("span",_s,c(i.value.selectedAddons.length)+" add-on"+c(i.value.selectedAddons.length>1?"s":"")+" selected ",1),e[39]||(e[39]=s("p",{class:"text-xs text-blue-600 dark:text-blue-300"}," Optional add-ons configured ",-1))])])])])):v("",!0),s("div",ws,[s("div",Ss,[s("div",Vs,[e[41]||(e[41]=s("h3",{class:"font-medium text-gray-900 dark:text-gray-100"}," Available Add-ons ",-1)),o(l(y),{onClick:e[4]||(e[4]=t=>T.value=!0),variant:"outline",size:"sm"},{default:r(()=>[o(l(U),{class:"w-4 h-4 mr-2"}),e[40]||(e[40]=u(" Add New Add-on "))]),_:1})]),D.value?(d(),n("div",Cs,[(d(),n(b,null,h(4,t=>s("div",{key:t,class:"border rounded-lg p-4 animate-pulse"},e[42]||(e[42]=[s("div",{class:"h-4 bg-gray-200 rounded mb-2"},null,-1),s("div",{class:"h-3 bg-gray-200 rounded mb-3"},null,-1),s("div",{class:"h-6 bg-gray-200 rounded"},null,-1)]))),64))])):x.value.length>0?(d(),n("div",Ts,[s("div",Us,[(d(!0),n(b,null,h(x.value,t=>(d(),n("div",{key:t.id,class:q(["border rounded-lg p-3 transition-colors group",{"border-blue-500 bg-blue-50 dark:bg-blue-900/20":O(t.id),"border-gray-200 hover:border-gray-300":!O(t.id)}])},[s("div",As,[s("div",{onClick:m=>W(t.id),class:"flex-1 cursor-pointer"},[s("h4",Ps,c(t.name),1),s("div",Ms," MYR "+c(t.price.toFixed(2)),1)],8,Fs),s("div",$s,[o(l(y),{onClick:m=>ue(t),variant:"ghost",size:"sm",class:"opacity-0 group-hover:opacity-100 transition-opacity"},{default:r(()=>[o(l(K),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),O(t.id)?(d(),V(l(X),{key:0,class:"w-5 h-5 text-blue-500"})):v("",!0)])])],2))),128))])])):(d(),n("div",Rs,[e[44]||(e[44]=s("div",{class:"mb-4"},[s("svg",{class:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1)),e[45]||(e[45]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"}," No add-ons available ",-1)),e[46]||(e[46]=s("p",{class:"text-gray-500 mb-4"}," Create your first add-on to get started ",-1)),o(l(y),{onClick:e[5]||(e[5]=t=>T.value=!0),variant:"outline"},{default:r(()=>[o(l(U),{class:"w-4 h-4 mr-2"}),e[43]||(e[43]=u(" Add Add-on "))]),_:1})]))]),s("div",Ns,[s("div",Ds,[s("h3",js,[e[47]||(e[47]=u(" Selected Add-ons ")),i.value.selectedAddons.length>0?(d(),n("span",zs," ("+c(i.value.selectedAddons.length)+") ",1)):v("",!0)]),i.value.selectedAddons.length>0?(d(),n("div",Is,[s("div",Os,[s("div",Ys,[(d(!0),n(b,null,h(i.value.selectedAddons,t=>(d(),n("div",{key:t.id,class:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[s("div",Bs,[s("div",Ls,[s("h5",Es,c(H(t.id)),1),s("div",Ws,[e[48]||(e[48]=s("span",{class:"text-xs text-gray-500"},"Default:",-1)),o(l(Y),{variant:"outline",class:"text-xs px-2 py-0.5"},{default:r(()=>[u(" MYR "+c(re(t.id)),1)]),_:2},1024),e[49]||(e[49]=s("span",{class:"text-xs text-gray-500"},"Max:",-1)),o(l(Y),{variant:"outline",class:"text-xs px-2 py-0.5"},{default:r(()=>[u(c(ne(t.id)),1)]),_:2},1024)])]),o(l(y),{onClick:m=>W(t.id),variant:"ghost",size:"sm",class:"text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 -mt-1 -mr-1"},{default:r(()=>[o(l(Q),{class:"w-4 h-4"})]),_:2},1032,["onClick"])]),s("div",Hs,[s("div",null,[o(l(p),{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},{default:r(()=>e[50]||(e[50]=[u(" Form Price (MYR) ")])),_:1}),s("div",qs,[o(l(w),{modelValue:t.customPrice,"onUpdate:modelValue":m=>t.customPrice=m,modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"w-full pl-12"},null,8,["modelValue","onUpdate:modelValue"]),e[51]||(e[51]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("span",{class:"text-gray-500 text-sm"},"MYR")],-1))]),e[52]||(e[52]=s("p",{class:"text-xs text-gray-500 mt-1"}," This price will be shown to clients for this add-on ",-1))]),s("div",Qs,[o(l($),{modelValue:t.hasSessionRestriction,"onUpdate:modelValue":m=>t.hasSessionRestriction=m},null,8,["modelValue","onUpdate:modelValue"]),o(l(p),{class:"text-sm"},{default:r(()=>e[53]||(e[53]=[u("Session specific")])),_:1})]),t.hasSessionRestriction?(d(),n("div",Ks,[o(l(p),{class:"text-sm"},{default:r(()=>e[54]||(e[54]=[u("Available for sessions:")])),_:1}),s("div",Gs,[(d(!0),n(b,null,h(i.value.selectedSessionTypes,m=>(d(),n("div",{key:m.id,class:"flex items-center space-x-2"},[A(s("input",{type:"checkbox",id:`addon-${t.id}-session-${m.id}`,"onUpdate:modelValue":f=>t.availableForSessions=f,value:m.id,class:"rounded"},null,8,Xs),[[be,t.availableForSessions]]),o(l(p),{for:`addon-${t.id}-session-${m.id}`,class:"text-sm"},{default:r(()=>[u(c(I(m.id)),1)]),_:2},1032,["for"])]))),128))])])):v("",!0)])]))),128))])])])):(d(),n("div",Js,e[55]||(e[55]=[s("div",{class:"mb-3"},[s("svg",{class:"w-8 h-8 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1),s("p",{class:"text-sm text-gray-500"}," Select add-ons from the left to customize pricing ",-1)])))])])])])])):v("",!0),g.value===4?(d(),n("div",Zs,[s("div",null,[e[72]||(e[72]=s("h2",{class:"text-xl font-semibold mb-4"},"Custom Fields",-1)),e[73]||(e[73]=s("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," Add fields to collect client information ",-1)),s("div",et,[s("div",st,[e[59]||(e[59]=s("h3",{class:"font-medium"},"Form Fields",-1)),o(l(y),{onClick:pe,variant:"outline",size:"sm"},{default:r(()=>[o(l(U),{class:"w-4 h-4 mr-2"}),e[58]||(e[58]=u(" Add Field "))]),_:1})]),(d(!0),n(b,null,h(i.value.customFields,(t,m)=>(d(),n("div",{key:m,class:"border rounded-lg p-4 space-y-3"},[s("div",tt,[o(l(w),{modelValue:t.label,"onUpdate:modelValue":f=>t.label=f,placeholder:"Field label (e.g., Full Name, Email)",class:"flex-1 mr-3"},null,8,["modelValue","onUpdate:modelValue"]),o(l(y),{onClick:f=>ve(m),variant:"ghost",size:"sm"},{default:r(()=>[o(l(Re),{class:"w-4 h-4"})]),_:2},1032,["onClick"])]),s("div",lt,[s("div",null,[o(l(p),null,{default:r(()=>e[60]||(e[60]=[u("Field Type")])),_:1}),o(l(Ce),{modelValue:t.type,"onUpdate:modelValue":f=>t.type=f},{default:r(()=>[o(l(Te),{class:"mt-1"},{default:r(()=>[o(l(Ue),{placeholder:"Select field type"})]),_:1}),o(l(Ae),null,{default:r(()=>[o(l(S),{value:"text"},{default:r(()=>e[61]||(e[61]=[u("Text")])),_:1}),o(l(S),{value:"email"},{default:r(()=>e[62]||(e[62]=[u("Email")])),_:1}),o(l(S),{value:"phone"},{default:r(()=>e[63]||(e[63]=[u("Phone")])),_:1}),o(l(S),{value:"date"},{default:r(()=>e[64]||(e[64]=[u("Date")])),_:1}),o(l(S),{value:"textarea"},{default:r(()=>e[65]||(e[65]=[u("Long Text")])),_:1}),o(l(S),{value:"file"},{default:r(()=>e[66]||(e[66]=[u("File Upload")])),_:1}),o(l(S),{value:"select"},{default:r(()=>e[67]||(e[67]=[u("Dropdown")])),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),s("div",null,[o(l(p),null,{default:r(()=>e[68]||(e[68]=[u("Placeholder Text")])),_:1}),o(l(w),{modelValue:t.placeholder,"onUpdate:modelValue":f=>t.placeholder=f,placeholder:"Placeholder text...",class:"mt-1"},null,8,["modelValue","onUpdate:modelValue"])])]),s("div",ot,[s("div",it,[o(l($),{modelValue:t.required,"onUpdate:modelValue":f=>t.required=f},null,8,["modelValue","onUpdate:modelValue"]),o(l(p),{class:"text-sm"},{default:r(()=>e[69]||(e[69]=[u("Required")])),_:1})]),s("div",at,[o(l($),{modelValue:t.hasConditionalLogic,"onUpdate:modelValue":f=>t.hasConditionalLogic=f},null,8,["modelValue","onUpdate:modelValue"]),o(l(p),{class:"text-sm"},{default:r(()=>e[70]||(e[70]=[u("Conditional logic")])),_:1})])]),t.type==="select"?(d(),n("div",dt,[o(l(p),{class:"text-sm"},{default:r(()=>e[71]||(e[71]=[u("Options (one per line):")])),_:1}),o(l(M),{modelValue:t.options,"onUpdate:modelValue":f=>t.options=f,placeholder:`Option 1
Option 2
Option 3`,class:"mt-1",rows:"3"},null,8,["modelValue","onUpdate:modelValue"])])):v("",!0)]))),128)),i.value.customFields.length===0?(d(),n("div",rt,' No custom fields added yet. Click "Add Field" to get started. ')):v("",!0)])])])):v("",!0),g.value===5?(d(),n("div",nt,[s("div",null,[e[80]||(e[80]=s("h2",{class:"text-xl font-semibold mb-4"}," Terms & Conditions and Price Settings ",-1)),s("div",ut,[s("div",null,[o(l(p),{for:"terms"},{default:r(()=>e[74]||(e[74]=[u("Terms & Conditions")])),_:1}),o(l(M),{id:"terms",modelValue:i.value.termsAndConditions,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.termsAndConditions=t),placeholder:"Enter your terms and conditions...",class:"mt-1",rows:"6"},null,8,["modelValue"])]),s("div",null,[o(l(p),{for:"termsCheckboxText"},{default:r(()=>e[75]||(e[75]=[u("T&C Checkbox Text")])),_:1}),o(l(w),{id:"termsCheckboxText",modelValue:i.value.termsCheckboxText,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.termsCheckboxText=t),placeholder:"I agree to the terms and conditions",class:"mt-1"},null,8,["modelValue"])]),s("div",mt,[e[79]||(e[79]=s("h3",{class:"font-medium"},"Price Display Settings",-1)),s("div",ct,[s("div",pt,[o(l($),{modelValue:i.value.priceSettings.showPriceToClient,"onUpdate:modelValue":e[8]||(e[8]=t=>i.value.priceSettings.showPriceToClient=t)},null,8,["modelValue"]),o(l(p),null,{default:r(()=>e[76]||(e[76]=[u("Show price to client")])),_:1})]),i.value.priceSettings.showPriceToClient?(d(),n("div",vt,[s("div",gt,[A(s("input",{type:"radio",id:"showPerItem","onUpdate:modelValue":e[9]||(e[9]=t=>i.value.priceSettings.priceDisplayMode=t),value:"per-item",class:"rounded"},null,512),[[P,i.value.priceSettings.priceDisplayMode]]),o(l(p),{for:"showPerItem"},{default:r(()=>e[77]||(e[77]=[u("Show per-item prices")])),_:1})]),s("div",ft,[A(s("input",{type:"radio",id:"showTotalOnly","onUpdate:modelValue":e[10]||(e[10]=t=>i.value.priceSettings.priceDisplayMode=t),value:"total-only",class:"rounded"},null,512),[[P,i.value.priceSettings.priceDisplayMode]]),o(l(p),{for:"showTotalOnly"},{default:r(()=>e[78]||(e[78]=[u("Show total price only")])),_:1})])])):v("",!0)])])])])])):v("",!0),g.value===6?(d(),n("div",yt,[s("div",null,[e[86]||(e[86]=s("h2",{class:"text-xl font-semibold mb-4"}," WhatsApp Message & Redirect ",-1)),s("div",xt,[s("div",null,[o(l(p),{for:"whatsappMessage"},{default:r(()=>e[81]||(e[81]=[u("WhatsApp Pre-filled Message")])),_:1}),o(l(M),{id:"whatsappMessage",modelValue:i.value.whatsappMessage,"onUpdate:modelValue":e[11]||(e[11]=t=>i.value.whatsappMessage=t),placeholder:`Hi! I'm interested in booking a photography session. Here are my details:

Name: {name}
Session: {session_type}
Total Price: {total_price}

Please let me know the next steps!`,class:"mt-1",rows:"6"},null,8,["modelValue"]),e[82]||(e[82]=s("p",{class:"text-sm text-gray-500 mt-2"}," Available placeholders: {name}, {email}, {phone}, {session_type}, {total_price}, {date}, {location} ",-1))]),s("div",null,[o(l(p),{for:"whatsappNumber"},{default:r(()=>e[83]||(e[83]=[u("WhatsApp Number")])),_:1}),o(l(w),{id:"whatsappNumber",modelValue:i.value.whatsappNumber,"onUpdate:modelValue":e[12]||(e[12]=t=>i.value.whatsappNumber=t),placeholder:"+60123456789",class:"mt-1"},null,8,["modelValue"])]),s("div",null,[o(l(p),{for:"fallbackUrl"},{default:r(()=>e[84]||(e[84]=[u("Fallback Redirect URL (Optional)")])),_:1}),o(l(w),{id:"fallbackUrl",modelValue:i.value.fallbackRedirectUrl,"onUpdate:modelValue":e[13]||(e[13]=t=>i.value.fallbackRedirectUrl=t),placeholder:"https://your-website.com/thank-you",class:"mt-1"},null,8,["modelValue"]),e[85]||(e[85]=s("p",{class:"text-sm text-gray-500 mt-1"}," Used if WhatsApp redirect fails or on desktop devices ",-1))])])])])):v("",!0),g.value===7?(d(),n("div",bt,[s("div",null,[e[91]||(e[91]=s("h2",{class:"text-xl font-semibold mb-4"},"Review & Publish",-1)),s("div",ht,[s("div",kt,[e[87]||(e[87]=s("h3",{class:"font-medium mb-4"},"Form Preview",-1)),s("div",_t,[s("div",null,[s("h4",wt,c(i.value.title||"Untitled Form"),1),s("p",St,c(i.value.description||"No description provided"),1)]),i.value.selectedSessionTypes.length>0?(d(),n("div",Vt,[s("h5",Ct," Session Types ("+c(i.value.selectedSessionTypes.length)+") ",1),s("ul",Tt,[(d(!0),n(b,null,h(i.value.selectedSessionTypes,t=>(d(),n("li",{key:t.id},c(I(t.id))+" - MYR "+c(se(t.id)),1))),128))])])):v("",!0),i.value.selectedAddons.length>0?(d(),n("div",Ut,[s("h5",At," Add-ons ("+c(i.value.selectedAddons.length)+") ",1),s("ul",Ft,[(d(!0),n(b,null,h(i.value.selectedAddons,t=>(d(),n("li",{key:t.id},c(H(t.id))+" - MYR "+c(de(t.id)),1))),128))])])):v("",!0),i.value.customFields.length>0?(d(),n("div",Pt,[s("h5",Mt," Custom Fields ("+c(i.value.customFields.length)+") ",1),s("ul",$t,[(d(!0),n(b,null,h(i.value.customFields,t=>(d(),n("li",{key:t.label},c(t.label)+" ("+c(t.type)+")"+c(t.required?" *":""),1))),128))])])):v("",!0)])]),s("div",Rt,[e[90]||(e[90]=s("h3",{class:"font-medium"},"Publish Options",-1)),s("div",Nt,[s("div",Dt,[A(s("input",{type:"radio",id:"saveDraft","onUpdate:modelValue":e[14]||(e[14]=t=>i.value.publishStatus=t),value:"draft",class:"rounded"},null,512),[[P,i.value.publishStatus]]),o(l(p),{for:"saveDraft"},{default:r(()=>e[88]||(e[88]=[u("Save as Draft")])),_:1})]),s("div",jt,[A(s("input",{type:"radio",id:"publish","onUpdate:modelValue":e[15]||(e[15]=t=>i.value.publishStatus=t),value:"published",class:"rounded"},null,512),[[P,i.value.publishStatus]]),o(l(p),{for:"publish"},{default:r(()=>e[89]||(e[89]=[u("Publish (Generate active link)")])),_:1})])])])])])])):v("",!0),s("div",zt,[g.value>1?(d(),V(l(y),{key:0,onClick:Z,variant:"outline"},{default:r(()=>[o(l(he),{class:"w-4 h-4"}),e[92]||(e[92]=u(" Previous "))]),_:1})):(d(),n("div",It)),s("div",Ot,[g.value===1?(d(),V(l(y),{key:0,onClick:e[16]||(e[16]=t=>l(B).push("/studio/forms/create")),variant:"outline"},{default:r(()=>e[93]||(e[93]=[u(" Cancel ")])),_:1})):v("",!0),g.value<7?(d(),V(l(y),{key:1,onClick:J,disabled:!L.value},{default:r(()=>[u(c(g.value===1?"Continue":"Next")+" ",1),o(l(_e),{class:"w-4 h-4"})]),_:1},8,["disabled"])):(d(),V(l(y),{key:2,onClick:ge,disabled:!i.value.title,class:"bg-green-600 hover:bg-green-700"},{default:r(()=>[u(c(i.value.publishStatus==="published"?"Publish Form":"Save Draft"),1)]),_:1},8,["disabled"]))])])]),_:1})]),_:1})]),o($e,{"is-open":C.value,"editing-session":N.value,"onUpdate:open":e[17]||(e[17]=t=>{C.value=t,t||(N.value=null)}),onSessionAdded:oe,onSessionUpdated:ie},null,8,["is-open","editing-session"]),o(Pe,{"is-open":T.value,"editing-addon":j.value,"onUpdate:open":e[18]||(e[18]=t=>{T.value=t,t||(j.value=null)}),onAddonAdded:me,onAddonUpdated:ce},null,8,["is-open","editing-addon"])]))}}),nl=we(Yt,[["__scopeId","data-v-489bd520"]]);export{nl as default};
