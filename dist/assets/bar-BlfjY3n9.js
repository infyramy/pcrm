import{d as N,s as D,a4 as K,e as X,c as Y,H as Q,L as tt,a5 as et,v as P,o as _,a7 as xt,m as G,p as W,g as Z,u as y,w as St,a8 as yt,n as kt,a as Vt,r as _t}from"./index-1M69Q-Yy.js";import{O as R,a as M,i as at,d as rt,g as k,t as C,u as st,b as O,e as Mt,h as F,s as V,f as H,v as ot,l as $t,x as it,y as nt,z as Dt,A as Ct,m as lt,o as ct,n as dt,p as Et}from"./index-B7AGZY5W.js";import{X as ht,a as ut,c as Gt,r as Wt,D as w,_ as wt,$ as Bt,b as At,O as U,A as Pt}from"./ChartLegend.vue_vue_type_script_setup_true_lang-4-x-cmrj.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-Dn20qXRk.js";function gt({x:S,y:e,w:t,h:o,tl:s=!1,tr:l=!1,bl:i=!1,br:r=!1,r:d=0}){let c;c=`M${S+d},${e}h${t-2*d}`;let n=l?d:0,a=l?0:d;return c+=`a${n},${n} 0 0 1 ${n},${n}`,c+=`h${a}v${a}`,c+=`v${o-2*d}`,n=r?d:0,a=r?0:d,c+=`a${n},${n} 0 0 1 ${-n},${n}`,c+=`v${a}h${-a}`,c+=`h${2*d-t}`,n=i?d:0,a=i?0:d,c+=`a${n},${n} 0 0 1 ${-n},${-n}`,c+=`h${-a}v${-a}`,c+=`v${2*d-o}`,n=s?d:0,a=s?0:d,c+=`a${n},${n} 0 0 1 ${n},${-n}`,c+=`v${-a}h${a}`,c+="z",c}const Ot=Object.assign(Object.assign({},ht),{color:void 0,barMaxWidth:void 0,barWidth:void 0,dataStep:void 0,barPadding:0,roundedCorners:2,cursor:null,barMinHeight1Px:!1,barMinHeightZeroValue:null,orientation:R.Vertical}),pt=M`
  label: stacked-bar-component;
`,Ft=at`
  :root {
    --vis-stacked-bar-cursor: default;
    --vis-stacked-bar-fill-color: var(--vis-color-main);
    --vis-stacked-bar-stroke-color: none;
    --vis-stacked-bar-stroke-width: 0px;
    --vis-stacked-bar-hover-stroke-width: none;
    --vis-stacked-bar-hover-stroke-color: none;

    /* Dark Theme */
    --vis-dark-stacked-bar-stroke-color: none;
  }

  body.theme-dark ${`.${pt}`} {
    --vis-stacked-bar-stroke-color: var(--vis-dark-stacked-bar-stroke-color);
  }
`,B=M`
  label: bar;
  fill: var(--vis-stacked-bar-fill-color);
  stroke: var(--vis-stacked-bar-stroke-color);
  stroke-width: var(--vis-stacked-bar-stroke-width);
  cursor: var(--vis-stacked-bar-cursor);

  &:hover {
    stroke-width: var(--vis-stacked-bar-hover-stroke-width);
    stroke: var(--vis-stacked-bar-hover-stroke-color);
  }
`,L=M`
  label: barGroup;
`,bt=M`
  label: barGroupExit;
`,Ht=Object.freeze(Object.defineProperty({__proto__:null,bar:B,barGroup:L,barGroupExit:bt,globalStyles:Ft,root:pt},Symbol.toStringTag,{value:"Module"}));class q extends ut{constructor(e){super(),this._defaultConfig=Ot,this.config=this._defaultConfig,this.getAccessors=()=>rt(this.config.y)?this.config.y:[this.config.y],this.stacked=!0,this.events={},this._barData=[],e&&this.setConfig(e)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};const e=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],t=this.dataScale.domain(),o=this._getBarWidth()/2,s=this._barData.map((p,h)=>k(p,this.config.x,h)),l=C(s),i=st(s),r=this.dataScale(l),d=this.dataScale(i),c=this.dataScale.invert(r+(e?o:-o)),n=this.dataScale.invert(d+(e?-o:o)),a=c<=t[0]?this.dataScale(t[0])-this.dataScale(c):0,u=n>t[1]?this.dataScale(n)-this.dataScale(t[1]):0;return{top:this.isVertical()?0:e?-u:a,bottom:this.isVertical()?0:e?-a:u,left:this.isVertical()?a:0,right:this.isVertical()?u:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===R.Vertical}_render(e){const{config:t}=this,o=O(e)?e:t.duration,s=this.getAccessors(),l=Mt(this._barData,0,s,this._prevNegative);this._prevNegative=l.map(h=>!!h.isMostlyNegative);const i=this.g.selectAll(`.${L}`).data(this._barData,(h,g)=>{var v;return`${(v=F(h,t.id,g))!==null&&v!==void 0?v:g}`}),r=(h,g)=>{const v=this.dataScale(k(h,t.x,g)),b=this.isVertical()?v:0,m=this.isVertical()?0:v;return`translate(${b},${m})`},c=i.enter().append("g").attr("class",L).attr("transform",r).style("opacity",1).merge(i);V(c,o).attr("transform",r).style("opacity",1);const n=i.exit().attr("class",bt);V(n,o).style("opacity",0).remove(),V(n.selectAll(`.${B}`),o).attr("transform",this.isVertical()?`translate(0,${this._height/3})`:`translate(${this._width/6},0)`);const a=c.selectAll(`.${B}`).data((h,g)=>l.map((v,b)=>Object.assign(Object.assign({},h),{_index:g,_stacked:v[g],_ending:b===l.length-1||b<=l.length-1&&l[b+1][g][0]!==v[g][1]}))),p=a.enter().append("path").attr("class",B).attr("d",(h,g)=>this._getBarPath(h,g,!0)).style("fill",(h,g)=>H(h,t.color,g)).merge(a);V(p,o).attr("d",(h,g)=>this._getBarPath(h,g)).style("fill",(h,g)=>H(h,t.color,g)).style("cursor",(h,g)=>F(h,t.cursor,g)),V(a.exit(),o).style("opacity",0).remove()}_getBarWidth(){const{config:e,datamodel:{data:t}}=this;if(ot(t))return 0;if(e.barWidth)return C([e.barWidth,e.barMaxWidth]);const o=this.dataScale.bandwidth,s=this.dataScale.domain?this.dataScale.domain():[];let i=1+(o?s.length:s[1]-s[0])/e.dataStep||!o&&t.filter((c,n)=>{const a=k(c,e.x,n);return a>=s[0]&&a<=s[1]}).length||t.length;!o&&i>=2&&(i+=1);const d=(i<2?1:1-e.barPadding)*(this.isVertical()?this._width:this._height)/i;return C([d,e.barMaxWidth])}_getVisibleData(){const{config:e,datamodel:{data:t}}=this,o=this._getBarWidth(),s=t.length<2?0:o/2,l=this.dataScale,i=Math.abs(l.invert(s)-l.invert(0));return t==null?void 0:t.filter((d,c)=>{const n=k(d,e.x,c),a=l.domain(),u=+a[0],p=+a[1];return n>=u-i&&n<=p+i})}_getBarPath(e,t,o=!1){const{config:s}=this,l=this.getAccessors(),i=this._getBarWidth(),r=e._stacked[1]<0,d=e._ending,c=k(e,l[t],e._index),n=o?0:Math.abs(this.valueScale(e._stacked[0])-this.valueScale(e._stacked[1])),a=!o&&s.barMinHeight1Px&&n<1&&isFinite(c)&&c!==s.barMinHeightZeroValue?1:n,u=o?this.valueScale(0):this.valueScale(r?e._stacked[0]:e._stacked[1])-(n<1&&s.barMinHeight1Px?1:0),p=-i/2,h=i,g=s.roundedCorners?O(s.roundedCorners)?+s.roundedCorners:h/2:0,v=nt(g,0,Math.min(n,h)/2),b=this.yScale.range()[0]>this.yScale.range()[1];return gt({x:this.isVertical()?p:u-a,y:this.isVertical()?u+(b?0:-a):p,w:this.isVertical()?h:a,h:this.isVertical()?a:h,tl:d&&(this.isVertical()?!r&&b||r&&!b:r),tr:d&&(this.isVertical()?!r&&b||r&&!b:!r),br:d&&(this.isVertical()?r&&b||!r&&!b:!r),bl:d&&(this.isVertical()?r&&b||!r&&!b:r),r:v})}getValueScaleExtent(e){const{datamodel:t}=this,o=this.getAccessors(),s=e?this._getVisibleData():t.data;return $t(s,...o)}getDataScaleExtent(){const{config:e,datamodel:t}=this;return it(t.data,e.x)}getYDataExtent(e){return this.isVertical()?this.getValueScaleExtent(e):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}}q.selectors=Ht;const Nt=Object.assign(Object.assign({},ht),{color:void 0,groupMaxWidth:void 0,groupWidth:void 0,dataStep:void 0,groupPadding:.05,barPadding:0,roundedCorners:2,barMinHeight:2,cursor:null,orientation:R.Vertical}),mt=M`
  label: grouped-bar-component;
`,Rt=at`
  :root {
    --vis-grouped-bar-cursor: default;
    --vis-grouped-bar-fill-color: var(--vis-color-main);
    --vis-grouped-bar-stroke-color: none;
    --vis-grouped-bar-stroke-width: 0px;
    --vis-grouped-bar-hover-stroke-width: 1px;
    --vis-grouped-bar-hover-stroke-color: none;


    /* Dark Theme */
    --vis-dark-grouped-bar-stroke-color: none;
  }

  body.theme-dark ${`.${mt}`} {
    --vis-grouped-bar-stroke-color: var(--vis-dark-grouped-bar-stroke-color);
  }
`,A=M`
  label: bar;
  fill: var(--vis-grouped-bar-fill-color);
  stroke: var(--vis-grouped-bar-stroke-color);
  stroke-width: var(--vis-grouped-bar-stroke-width);
  cursor: var(--vis-grouped-bar-cursor);

  &:hover {
    stroke-width: var(--vis-grouped-bar-hover-stroke-width);
    stroke: var(--vis-grouped-bar-hover-stroke-color);
  }
`,z=M`
  label: barGroup;
`,ft=M`
  label: barGroupExit;
`,Tt=Object.freeze(Object.defineProperty({__proto__:null,bar:A,barGroup:z,barGroupExit:ft,globalStyles:Rt,root:mt},Symbol.toStringTag,{value:"Module"}));class I extends ut{constructor(e){super(),this._defaultConfig=Nt,this.config=this._defaultConfig,this.getAccessors=()=>rt(this.config.y)?this.config.y:[this.config.y],this.events={},this._barData=[],e&&this.setConfig(e)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};const e=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],t=this.dataScale.domain(),o=this._getGroupWidth()/2,s=this._barData.map((p,h)=>k(p,this.config.x,h)),l=C(s),i=st(s),r=this.dataScale(l),d=this.dataScale(i),c=this.dataScale.invert(r+(e?o:-o)),n=this.dataScale.invert(d+(e?-o:o)),a=c<=t[0]?this.dataScale(t[0])-this.dataScale(c):0,u=n>t[1]?this.dataScale(n)-this.dataScale(t[1]):0;return{top:this.isVertical()?0:e?-u:a,bottom:this.isVertical()?0:e?-a:u,left:this.isVertical()?a:0,right:this.isVertical()?u:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===R.Vertical}_render(e){const{config:t}=this,o=O(e)?e:t.duration,s=this._getGroupWidth(),l=this.getAccessors(),i=[-s/2,s/2],r=Gt().domain(Wt(l.length)).range(i).paddingInner(t.barPadding).paddingOuter(t.barPadding),d=this.g.selectAll(`.${z}`).data(this._barData,(m,f)=>{var x;return`${(x=F(m,t.id,f))!==null&&x!==void 0?x:f}`}),c=(m,f)=>{const x=this.dataScale(k(m,t.x,f)),E=this.isVertical()?x:0,$=this.isVertical()?0:x;return`translate(${E},${$})`},a=d.enter().append("g").attr("class",z).attr("transform",c).style("opacity",1).merge(d);V(a,o).attr("transform",c).style("opacity",1);const u=d.exit().attr("class",ft);V(u,o).style("opacity",0).remove(),V(u.selectAll(`.${A}`),o).attr("transform",(m,f,x)=>this.isVertical()?`translate(0,${this.yScale(0)}) scale(1,0)`:`translate(${this.xScale(0)},0) scale(0,1)`);const p=r.bandwidth(),h=a.selectAll(`.${A}`).data(m=>l.map(()=>m)),g=this._getValueAxisDirection(),b=h.enter().append("path").attr("class",A).attr("d",(m,f)=>{const x=r(f),E=this.valueScale(0),$=p;return this._getBarPath(x,E,$,0,!1,g)}).style("fill",(m,f)=>H(m,t.color,f)).merge(h);V(b,o).attr("d",(m,f)=>{const x=r(f),E=p,$=k(m,l[f]),T=$<0;let J=T?this.valueScale(0):this.valueScale($||0),j=Math.abs(this.valueScale(0)-this.valueScale($))||0;if(j<t.barMinHeight){const vt=g===w.North?-1:1;J=this.valueScale(0)+vt*t.barMinHeight,j=t.barMinHeight}return this._getBarPath(x,J,E,j,T,g)}).style("fill",(m,f)=>H(m,t.color,f)).style("cursor",(m,f)=>F(m,t.cursor,f)),V(h.exit(),o).remove()}_getValueAxisDirection(){return this.valueScale.range()[0]>this.valueScale.range()[1]?w.North:w.South}_getVisibleData(){const{config:e,datamodel:{data:t}}=this,o=this._getGroupWidth(),s=t.length<2?0:o/2,l=this.dataScale,i=Math.abs(l.invert(s)-l.invert(0));return t==null?void 0:t.filter((d,c)=>{const n=k(d,e.x,c),a=l.domain(),u=+a[0],p=+a[1];return n>=u-i&&n<=p+i})}_getBarPath(e,t,o,s,l,i){const{config:r}=this,d=r.roundedCorners?O(r.roundedCorners)?+r.roundedCorners:o/2:0,c=nt(d,0,Math.min(s,o)/2),n=i===w.North,a=this.isVertical()&&l!==n,u=this.isVertical()&&l===n,p=!this.isVertical()&&l,h=!this.isVertical()&&!l;return gt({x:this.isVertical()?e:t+(n?0:-s),y:this.isVertical()?t+(n?0:-s):e,w:this.isVertical()?o:s,h:this.isVertical()?s:o,tl:a||p,tr:a||h,bl:u||p,br:u||h,r:c})}_getGroupWidth(){const{config:e,datamodel:{data:t}}=this;if(ot(t))return 0;if(e.groupWidth)return C([e.groupWidth,e.groupMaxWidth]);const o=this.dataScale.bandwidth,s=this.dataScale.domain?this.dataScale.domain():[];let i=1+(o?s.length:s[1]-s[0])/e.dataStep||!o&&t.filter((c,n)=>{const a=k(c,e.x,n);return a>=s[0]&&a<=s[1]}).length||t.length;!o&&i>=2&&(i+=1);const d=(i<2?1:1-e.groupPadding)*(this.isVertical()?this._width:this._height)/i;return C([d,e.groupMaxWidth])}getValueScaleExtent(e){const{datamodel:t}=this,o=this.getAccessors(),s=e?this._getVisibleData():t.data,l=Dt(s,...o),i=Ct(s,...o);return[l>0?0:l,i<0?0:i]}getDataScaleExtent(){const{config:e,datamodel:t}=this;return it(t.data,e.x)}getYDataExtent(e){return this.isVertical()?this.getValueScaleExtent(e):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}}I.selectors=Tt;const jt={"data-vis-component":""},Lt=N({__name:"index",props:{color:{},groupWidth:{},groupMaxWidth:{},dataStep:{},groupPadding:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},barMinHeight:{},cursor:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(S,{expose:e}){const t=K(ct),o=S,s=D(()=>t.data.value??o.data),l=lt(o),i=X();return Q(()=>{tt(()=>{var r;i.value=new I(l.value),(r=i.value)==null||r.setData(s.value),t.update(i.value)})}),et(()=>{var r;(r=i.value)==null||r.destroy(),t.destroy()}),P(l,(r,d)=>{var c;dt(r,d)||(c=i.value)==null||c.setConfig(l.value)}),P(s,()=>{var r;(r=i.value)==null||r.setData(s.value)}),e({component:i}),(r,d)=>(_(),Y("div",jt))}}),zt={"data-vis-component":""},Xt=N({__name:"index",props:{color:{},barWidth:{},barMaxWidth:{},dataStep:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},cursor:{},barMinHeight1Px:{type:Boolean},barMinHeightZeroValue:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(S,{expose:e}){const t=K(ct),o=S,s=D(()=>t.data.value??o.data),l=lt(o),i=X();return Q(()=>{tt(()=>{var r;i.value=new q(l.value),(r=i.value)==null||r.setData(s.value),t.update(i.value)})}),et(()=>{var r;(r=i.value)==null||r.destroy(),t.destroy()}),P(l,(r,d)=>{var c;dt(r,d)||(c=i.value)==null||c.setConfig(l.value)}),P(s,()=>{var r;(r=i.value)==null||r.setData(s.value)}),e({component:i}),(r,d)=>(_(),Y("div",zt))}}),Yt=N({__name:"BarChart",props:{data:{},categories:{},index:{},colors:{},margin:{default:()=>({top:0,bottom:0,left:0,right:0})},filterOpacity:{default:.2},xFormatter:{},yFormatter:{},showXAxis:{type:Boolean,default:!0},showYAxis:{type:Boolean,default:!0},showTooltip:{type:Boolean,default:!0},showLegend:{type:Boolean,default:!0},showGridLine:{type:Boolean,default:!0},customTooltip:{},type:{default:"grouped"},roundedCorners:{default:0}},emits:["legendItemClick"],setup(S,{emit:e}){const t=S,o=e,s=D(()=>t.index),l=D(()=>{var a;return(a=t.colors)!=null&&a.length?t.colors:Et(t.categories.length)}),i=X(t.categories.map((a,u)=>({name:a,color:l.value[u],inactive:!1}))),r=xt();function d(a,u){o("legendItemClick",a,u)}const c=D(()=>t.type==="grouped"?Lt:Xt),n=D(()=>t.type==="grouped"?I.selectors.bar:q.selectors.bar);return(a,u)=>(_(),Y("div",{class:kt(y(Vt)("w-full h-[400px] flex flex-col items-end",a.$attrs.class??""))},[a.showLegend?(_(),G(y(wt),{key:0,items:i.value,"onUpdate:items":u[0]||(u[0]=p=>i.value=p),onLegendItemClick:d},null,8,["items"])):W("",!0),Z(y(Bt),{data:a.data,style:yt({height:y(r)?"100%":"auto"}),margin:a.margin},{default:St(()=>[a.showTooltip?(_(),G(y(At),{key:0,colors:l.value,items:i.value,"custom-tooltip":a.customTooltip,index:s.value},null,8,["colors","items","custom-tooltip","index"])):W("",!0),Z(y(c),{x:(p,h)=>h,y:a.categories.map(p=>h=>h[p]),color:l.value,"rounded-corners":a.roundedCorners,"bar-padding":.05,attributes:{[n.value]:{opacity:(p,h)=>{var v;const g=h%a.categories.length;return(v=i.value[g])!=null&&v.inactive?a.filterOpacity:1}}}},null,8,["x","y","color","rounded-corners","attributes"]),a.showXAxis?(_(),G(y(U),{key:1,type:"x","tick-format":a.xFormatter??(p=>{var h;return(h=a.data[p])==null?void 0:h[s.value]}),"grid-line":!1,"tick-line":!1,"tick-text-color":"hsl(var(--vis-text-color))"},null,8,["tick-format"])):W("",!0),a.showYAxis?(_(),G(y(U),{key:2,type:"y","tick-line":!1,"tick-format":a.yFormatter,"domain-line":!1,"grid-line":a.showGridLine,attributes:{[y(Pt).selectors.grid]:{class:"text-muted"}},"tick-text-color":"hsl(var(--vis-text-color))"},null,8,["tick-format","grid-line","attributes"])):W("",!0),_t(a.$slots,"default")]),_:3},8,["data","style","margin"])],2))}}),Ut=N({__name:"bar",setup(S){const e=[{name:"Jan",total:Math.floor(Math.random()*2e3)+500,predicted:Math.floor(Math.random()*2e3)+500},{name:"Feb",total:Math.floor(Math.random()*2e3)+500,predicted:Math.floor(Math.random()*2e3)+500},{name:"Mar",total:Math.floor(Math.random()*2e3)+500,predicted:Math.floor(Math.random()*2e3)+500},{name:"Apr",total:Math.floor(Math.random()*2e3)+500,predicted:Math.floor(Math.random()*2e3)+500},{name:"May",total:Math.floor(Math.random()*2e3)+500,predicted:Math.floor(Math.random()*2e3)+500},{name:"Jun",total:Math.floor(Math.random()*2e3)+500,predicted:Math.floor(Math.random()*2e3)+500},{name:"Jul",total:Math.floor(Math.random()*2e3)+500,predicted:Math.floor(Math.random()*2e3)+500}];return(t,o)=>(_(),G(y(Yt),{data:e,index:"name",categories:["total","predicted"],"y-formatter":(s,l,i)=>`${s}%`},null,8,["y-formatter"]))}});export{Ut as default};
