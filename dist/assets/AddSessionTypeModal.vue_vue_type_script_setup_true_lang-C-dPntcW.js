import{d as N,r as S,D as T,H as k,v as U,w as t,f as a,g as n,b as p,h as l,t as u,_ as g,c as $,j as A,K as c,l as f}from"./index-C2UrP5hw.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-CSZ-Dkyw.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-DVjpD-L7.js";import{_ as B}from"./Textarea.vue_vue_type_script_setup_true_lang--1zaO6ew.js";import{_ as C,b as O,c as P,a as E}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CGEsSMnb.js";import{_ as F}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CGpZvTRB.js";import{_ as M}from"./DialogFooter.vue_vue_type_script_setup_true_lang-zsfmxkQJ.js";const q={key:0},K={key:1},G=N({__name:"AddSessionTypeModal",props:{isOpen:{type:Boolean},editingSession:{}},emits:["update:open","session-added","session-updated"],setup(V,{emit:w}){const d=V,m=w,r=S(!1),s=S({name:"",price:0,description:""}),y=T(()=>s.value.name.trim()!==""&&s.value.price>0),_=()=>{s.value={name:"",price:0,description:""}};k(()=>d.editingSession,i=>{i?s.value={name:i.name,price:i.price,description:i.description||""}:_()},{immediate:!0});const D=async()=>{if(y.value)try{if(r.value=!0,d.editingSession){const i={...d.editingSession,name:s.value.name,price:s.value.price,description:s.value.description};c.success("Session type updated successfully!"),m("session-updated",i)}else{const i={id:Date.now().toString(),name:s.value.name,price:s.value.price,description:s.value.description,isActive:!0,createdAt:new Date};c.success("Session type added successfully!"),m("session-added",i)}m("update:open",!1),_()}catch(i){console.error("Error saving session type:",i),c.error(`Failed to ${d.editingSession?"update":"add"} session type. Please try again.`)}finally{r.value=!1}};return(i,e)=>(f(),U(a(C),{open:i.isOpen,"onUpdate:open":e[4]||(e[4]=o=>i.$emit("update:open",o))},{default:t(()=>[n(a(E),{class:"sm:max-w-md"},{default:t(()=>[n(a(O),null,{default:t(()=>[n(a(P),null,{default:t(()=>[l(u(i.editingSession?"Edit Session Type":"Add New Session Type"),1)]),_:1}),n(a(F),null,{default:t(()=>[l(u(i.editingSession?"Update the session type details.":"Create a new photography session type that can be used in forms."),1)]),_:1})]),_:1}),p("form",{onSubmit:A(D,["prevent"]),class:"space-y-4"},[p("div",null,[n(a(v),{for:"sessionName"},{default:t(()=>e[5]||(e[5]=[l("Session Name *")])),_:1}),n(a(b),{id:"sessionName",modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.name=o),placeholder:"e.g., Nikah, Sanding, Outdoor",class:"mt-1",required:""},null,8,["modelValue"])]),p("div",null,[n(a(v),{for:"sessionPrice"},{default:t(()=>e[6]||(e[6]=[l("Price (MYR) *")])),_:1}),n(a(b),{id:"sessionPrice",modelValue:s.value.price,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.price=o),type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"mt-1",required:""},null,8,["modelValue"])]),p("div",null,[n(a(v),{for:"sessionDescription"},{default:t(()=>e[7]||(e[7]=[l("Description (Optional)")])),_:1}),n(a(B),{id:"sessionDescription",modelValue:s.value.description,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.description=o),placeholder:"Brief description of this session type...",class:"mt-1",rows:"3"},null,8,["modelValue"])]),n(a(M),{class:"gap-2"},{default:t(()=>[n(a(g),{type:"button",variant:"outline",onClick:e[3]||(e[3]=o=>i.$emit("update:open",!1)),disabled:r.value},{default:t(()=>e[8]||(e[8]=[l(" Cancel ")])),_:1},8,["disabled"]),n(a(g),{type:"submit",disabled:!y.value||r.value},{default:t(()=>[r.value?(f(),$("span",q,u(d.editingSession?"Updating...":"Adding..."),1)):(f(),$("span",K,u(d.editingSession?"Update Session Type":"Add Session Type"),1))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}});export{G as _};
